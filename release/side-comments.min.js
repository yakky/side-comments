!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).SideComments=e()}}(function(){return function i(s,c,a){function l(n,e){if(!c[n]){if(!s[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(u)return u(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var o=c[n]={exports:{}};s[n][0].call(o.exports,function(e){var t=s[n][1][e];return l(t||e)},o,o.exports,i,s,c,a)}return c[n].exports}for(var u="function"==typeof require&&require,e=0;e<a.length;e++)l(a[e]);return l}({1:[function(e,t,n){t.exports=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t}},{}],2:[function(e,t,n){var o=e("./vendor/lodash-custom.js"),i=e("./section.js"),s=e("emitter");function r(e,t,n,r){this.$el=$(e),this.$body=$("body"),this.eventPipe=new s,this.currentUser=o.clone(t)||null,this.existingComments=o.cloneDeep(n)||[],this.sections=[],this.activeSection=null,(r=r||{}).locale=r.locale||"en",r.voting=r.voting||!1,r.reference=r.reference||"",this.options=r,this.eventPipe.on("showComments",o.bind(this.showComments,this)),this.eventPipe.on("hideComments",o.bind(this.hideComments,this)),this.eventPipe.on("sectionSelected",o.bind(this.sectionSelected,this)),this.eventPipe.on("sectionDeselected",o.bind(this.sectionDeselected,this)),this.eventPipe.on("commentPosted",o.bind(this.commentPosted,this)),this.eventPipe.on("commentUpdated",o.bind(this.commentUpdated,this)),this.eventPipe.on("commentDeleted",o.bind(this.commentDeleted,this)),this.eventPipe.on("commentUpvoted",o.bind(this.commentUpvoted,this)),this.eventPipe.on("commentDownvoted",o.bind(this.commentUpvoted,this)),this.eventPipe.on("addCommentAttempted",o.bind(this.addCommentAttempted,this)),this.$body.on("click",o.bind(this.bodyClick,this)),this.initialize(this.existingComments)}s(r.prototype),r.prototype.initialize=function(e){o.each(this.$el.find(".commentable-section"),function(e){var t=$(e),n=t.data("section-id").toString(),r=o.find(this.existingComments,{sectionId:n});this.sections.push(new i(this.eventPipe,t,this.currentUser,r,this.options))},this)},r.prototype.showComments=function(){this.$el.addClass("side-comments-open")},r.prototype.hideComments=function(){this.activeSection&&(this.activeSection.deselect(),this.activeSection=null),this.$el.removeClass("side-comments-open")},r.prototype.sectionSelected=function(e){this.showComments(),this.activeSection&&this.activeSection.deselect(),this.activeSection=e},r.prototype.sectionDeselected=function(e){this.hideComments(),this.activeSection=null},r.prototype.commentPosted=function(e){this.emit("commentPosted",e)},r.prototype.commentUpdated=function(e){this.emit("commentUpdated",e)},r.prototype.commentDeleted=function(e){this.emit("commentDeleted",e)},r.prototype.commentUpvoted=function(e){this.emit("commentUpvoted",e)},r.prototype.commentDownvoted=function(e){this.emit("commentDownvoted",e)},r.prototype.addCommentAttempted=function(){this.emit("addCommentAttempted")},r.prototype.insertComment=function(e){o.find(this.sections,{id:e.sectionId}).insertComment(e)},r.prototype.replaceComment=function(e){o.find(this.sections,{id:e.sectionId}).replaceComment(e)},r.prototype.removeComment=function(e,t){o.find(this.sections,{id:e}).removeComment(t)},r.prototype.deleteComment=function(e,t){o.find(this.sections,{id:e}).deleteComment(t)},r.prototype.commentsAreVisible=function(){return this.$el.hasClass("side-comments-open")},r.prototype.bodyClick=function(e){var t=$(e.target);t.closest(".side-comment").length<1&&0<t.closest("body").length&&(this.activeSection&&this.activeSection.deselect(),this.hideComments())},r.prototype.setCurrentUser=function(e){this.hideComments(),this.currentUser=e,o.each(this.sections,o.bind(function(e){e.currentUser=this.currentUser,e.render()},this))},r.prototype.removeCurrentUser=function(){this.setCurrentUser(null)},r.prototype.destroy=function(){this.hideComments(),this.$el.off()},t.exports=r},{"./section.js":3,"./vendor/lodash-custom.js":4,emitter:28}],3:[function(e,t,n){var i=e("./vendor/lodash-custom.js"),r=e("../templates/section.html"),o=e("../templates/comment.html"),s=e("./helpers/mobile-check.js"),c=(e("confirmation"),e("t")),a=e("trunkata"),l=e("classes"),u=e("closest"),h=e("dom");function f(e,t,n,r,o){this.eventPipe=e,this.$el=t,this.comments=r?r.comments:[],this.currentUser=n||null,this.clickEventName=s()?"touchstart":"click",this.locale=o.locale||o.trans.locale||"en",this.voting=o.voting||!1,this.reference=o.reference,this.id=t.data("section-id"),this.$el.on(this.clickEventName,".side-comment .marker",i.bind(this.markerClick,this)),this.$el.on(this.clickEventName,".side-comment .add-comment",i.bind(this.addCommentClick,this)),this.$el.on(this.clickEventName,".side-comment .post",i.bind(this.postCommentClick,this)),this.$el.on(this.clickEventName,".side-comment .cancel",i.bind(this.cancelCommentClick,this)),this.$el.on(this.clickEventName,".side-comment .edit",i.bind(this.showEditCommentForm,this)),this.$el.on(this.clickEventName,".side-comment .cancel-edit",i.bind(this.hideEditCommentForm,this)),this.$el.on(this.clickEventName,".side-comment .delete",i.bind(this.deleteCommentClick,this)),this.$el.on(this.clickEventName,".side-comment .upvote",i.bind(this.upvoteCommentClick,this)),this.$el.on(this.clickEventName,".side-comment .downvote",i.bind(this.downvoteCommentClick,this)),this.$el.on(this.clickEventName,".side-comment .read-more",i.bind(this.readmore,this)),this.render()}f.prototype.markerClick=function(e){e.preventDefault(),this.select()},f.prototype.addCommentClick=function(e){e.preventDefault(),this.currentUser?this.showCommentForm():this.eventPipe.emit("addCommentAttempted")},f.prototype.showCommentForm=function(){0<this.comments.length&&(this.$el.find(".add-comment").addClass("hide"),this.$el.find(".comment-form").addClass("active")),this.focusCommentBox()},f.prototype.hideCommentForm=function(){0<this.comments.length&&(this.$el.find(".add-comment").removeClass("hide"),this.$el.find(".comment-form").removeClass("active")),this.$el.find(".comment-box").empty()},f.prototype.showEditCommentForm=function(e){e.preventDefault();var t=$(e.target).closest("li");t.find(".comment-view-wrapper").addClass("hide"),t.find(".comment-form-wrapper").removeClass("hide")},f.prototype.hideEditCommentForm=function(e){e.preventDefault();var t=$(e.target).closest("li");t.find(".comment-view-wrapper").removeClass("hide"),t.find(".comment-form-wrapper").addClass("hide")},f.prototype.focusCommentBox=function(){setTimeout(i.bind(function(){this.$el.find(".comment-box").get(0).focus()},this),300)},f.prototype.cancelCommentClick=function(e){e.preventDefault(),this.cancelComment()},f.prototype.cancelComment=function(){0<this.comments.length?this.hideCommentForm():(this.deselect(),this.eventPipe.emit("hideComments"))},f.prototype.postCommentClick=function(e){e.preventDefault();var t=$(e.target).closest(".comment-form-wrapper");this.postComment(t)},f.prototype.postComment=function(e){var t=e.find(".comment-box"),n=t.val(),r=e.find(".comment-id").val();if(4096<n.length)return e.find(".error").html(c("Argument is limited to 4096 characters"));e.find(".error").html("");var o={id:r,sectionId:this.id,comment:n,authorAvatarUrl:this.currentUser.avatarUrl,authorName:this.currentUser.name,authorId:this.currentUser.id,authorUrl:this.currentUser.authorUrl||null};r?this.eventPipe.emit("commentUpdated",o):(t.val(""),this.eventPipe.emit("commentPosted",o))},f.prototype.insertComment=function(e){this.comments.push(e);var t=i.template(o,{comment:e,currentUser:this.currentUser,t:c,voting:this.voting});this.$el.find(".comments").append(t),this.$el.find(".side-comment").addClass("has-comments"),this.updateCommentCount(),this.hideCommentForm()},f.prototype.replaceComment=function(e){var t=i.template(o,{comment:e,currentUser:this.currentUser,t:c,voting:this.voting});this.$el.find("[data-comment-id="+e.id+"]").replaceWith(t)},f.prototype.updateCommentCount=function(){this.$el.find(".marker span").text(this.comments.length)},f.prototype.deleteCommentClick=function(e){e.preventDefault();var t=$(e.target).closest("li").data("comment-id");window.confirm("Are you sure you want to delete this comment?")&&this.deleteComment(t)},f.prototype.deleteComment=function(e){var t=i.find(this.comments,{id:e});t.sectionId=this.id,this.eventPipe.emit("commentDeleted",t)},f.prototype.upvoteCommentClick=function(e){e.preventDefault();var t=$(e.target).closest("li").data("comment-id");this.upvoteComment(t)},f.prototype.upvoteComment=function(e){var t=i.find(this.comments,{id:e});t.sectionId=this.id,this.eventPipe.emit("commentUpvoted",t)},f.prototype.downvoteCommentClick=function(e){e.preventDefault();var t=$(e.target).closest("li").data("comment-id");this.downvoteComment(t)},f.prototype.downvoteComment=function(e){var t=i.find(this.comments,{id:e});t.sectionId=this.id,this.eventPipe.emit("commentDownvoted",t)},f.prototype.removeComment=function(e){this.comments=i.reject(this.comments,{id:e}),this.$el.find('.side-comment .comments li[data-comment-id="'+e+'"]').remove(),this.updateCommentCount(),this.comments.length<1&&this.$el.find(".side-comment").removeClass("has-comments")},f.prototype.select=function(){this.isSelected()?(this.deselect(),this.eventPipe.emit("sectionDeselected",this)):(this.$el.find(".side-comment").addClass("active"),0===this.comments.length&&this.currentUser&&this.focusCommentBox(),this.$el.find("li[data-comment-id] p.comment").each(function(e,t){var n=t.innerHTML.length;if(a(t,{lines:4}),t.innerHTML.length<n){var r=document.createElement("a");l(r).add("action-link").add("read-more"),r.href="#",r.innerHTML=c("read more"),t.appendChild(r)}}),this.eventPipe.emit("sectionSelected",this))},f.prototype.readmore=function(e){e.preventDefault();var t,n,r,o,i=u(e.target,"li[data-comment-id]"),s=i.getAttribute("data-comment-id"),c=(t=this.comments,n="id === %id".replace("%id",s),o=new Function("_","return _."+n),t.some(function(e){return!!o(e)&&(r=e,!0)}),r||null);h("p.comment",i).html(c.text)},f.prototype.deselect=function(){this.$el.find(".side-comment").removeClass("active"),this.hideCommentForm()},f.prototype.isSelected=function(){return this.$el.find(".side-comment").hasClass("active")},f.prototype.sectionClasses=function(){var e="";return 0<this.comments.length&&(e+=" has-comments"),this.currentUser||(e+=" no-current-user"),e},f.prototype.render=function(){this.$el.find(".side-comment").remove(),$(i.template(r,{commentTemplate:o,comments:this.comments,sectionClasses:this.sectionClasses(),currentUser:this.currentUser,t:c,voting:this.voting,reference:this.reference})).appendTo(this.$el)},f.prototype.destroy=function(){this.$el.off()},t.exports=f},{"../templates/comment.html":63,"../templates/section.html":64,"./helpers/mobile-check.js":1,"./vendor/lodash-custom.js":4,classes:5,closest:6,confirmation:41,dom:18,t:53,trunkata:60}],4:[function(e,Be,Ve){(function(We){(function(){var v,t=[],o={},n=40,g=/\b__p \+= '';/g,y=/\b(__p \+=) '' \+/g,b=/(__e\(.*?\)|\b__t\)) \+\n'';/g,C=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,h=/\w*$/,r=/^\s*function[ \n\r\t]+\w/,w=/<%=([\s\S]+?)%>/g,x=/($^)/,s=/\bthis\b/,_=/['\n\r\t\u2028\u2029\\]/g,i=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],E=0,j="[object Arguments]",F="[object Array]",S="[object Boolean]",A="[object Date]",c="[object Error]",a="[object Function]",O="[object Number]",T="[object Object]",P="[object RegExp]",$="[object String]",f={"[object Function]":!1};f[j]=f[F]=f[S]=f[A]=f[O]=f[T]=f[P]=f[$]=!0;var l={configurable:!1,enumerable:!1,value:null,writable:!1},u={args:"",array:null,bottom:"",firstArg:"",init:"",keys:null,loop:"",shadowedProps:null,support:null,top:"",useHas:!1},N={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1},p={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"},d=N[typeof window]&&window||this,e=N[typeof Ve]&&Ve&&!Ve.nodeType&&Ve,m=N[typeof Be]&&Be&&!Be.nodeType&&Be,U=m&&m.exports===e&&e,L=N[typeof We]&&We;function D(e){return"\\"+p[e]}function M(){return t.pop()||[]}function z(e){return"function"!=typeof e.toString&&"string"==typeof(e+"")}function H(e){e.length=0,t.length<n&&t.push(e)}function I(e,t,n){t||(t=0),void 0===n&&(n=e?e.length:0);for(var r=-1,o=n-t||0,i=Array(o<0?0:o);++r<o;)i[r]=e[t+r];return i}!L||L.global!==L&&L.window!==L||(d=L);var q=[],R=Error.prototype,W=Object.prototype,B=String.prototype,V=W.toString,Z=RegExp("^"+String(V).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),K=Function.prototype.toString,J=W.hasOwnProperty,G=q.push,X=W.propertyIsEnumerable,Q=q.unshift,Y=function(){try{var e={},t=ge(t=Object.defineProperty)&&t,n=t(e,e,e)&&t}catch(e){}return n}(),ee=ge(ee=Object.create)&&ee,te=ge(te=Array.isArray)&&te,ne=ge(ne=Object.keys)&&ne,re={};re[F]=Array,re[S]=Boolean,re[A]=Date,re[a]=Function,re[T]=Object,re[O]=Number,re[P]=RegExp,re[$]=String;var oe={};function ie(){}oe[F]=oe[A]=oe[O]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},oe[S]=oe[$]={constructor:!0,toString:!0,valueOf:!0},oe[c]=oe[a]=oe[P]={constructor:!0,toString:!0},oe[T]={constructor:!0},function(){for(var e=i.length;e--;){var t=i[e];for(var n in oe)J.call(oe,n)&&!J.call(oe[n],t)&&(oe[n][t]=!1)}}();var se=ie.support={};!function(){var e=function(){this.x=1},t={0:1,length:1},n=[];for(var r in e.prototype={valueOf:1,y:1},new e)n.push(r);for(r in arguments);se.argsClass=V.call(arguments)==j,se.argsObject=arguments.constructor==Object&&!(arguments instanceof Array),se.enumErrorProps=X.call(R,"message")||X.call(R,"name"),se.enumPrototypes=X.call(e,"prototype"),se.funcDecomp=!ge(d.WinRTError)&&s.test(function(){return this}),se.funcNames="string"==typeof Function.name,se.nonEnumArgs=0!=r,se.nonEnumShadows=!/valueOf/.test(n),se.spliceObjects=(q.splice.call(t,0,1),!t[0]),se.unindexedChars="x"[0]+Object("x")[0]!="xx";try{se.nodeClass=!(V.call(document)==T&&!({toString:0}+""))}catch(e){se.nodeClass=!0}}(1),ie.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:w,variable:"",imports:{_:ie}};var ce=function(e){var t="var index, iterable = "+e.firstArg+", result = "+e.init+";\nif (!iterable) return result;\n"+e.top+";";e.array?(t+="\nvar length = iterable.length; index = -1;\nif ("+e.array+") {  ",se.unindexedChars&&(t+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),t+="\n  while (++index < length) {\n    "+e.loop+";\n  }\n}\nelse {  "):se.nonEnumArgs&&(t+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+e.loop+";\n    }\n  } else {  "),se.enumPrototypes&&(t+="\n  var skipProto = typeof iterable == 'function';\n  "),se.enumErrorProps&&(t+="\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  ");var n=[];if(se.enumPrototypes&&n.push('!(skipProto && index == "prototype")'),se.enumErrorProps&&n.push('!(skipErrorProps && (index == "message" || index == "name"))'),e.useHas&&e.keys)t+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n",n.length&&(t+="    if ("+n.join(" && ")+") {\n  "),t+=e.loop+";    ",n.length&&(t+="\n    }"),t+="\n  }  ";else if(t+="\n  for (index in iterable) {\n",e.useHas&&n.push("hasOwnProperty.call(iterable, index)"),n.length&&(t+="    if ("+n.join(" && ")+") {\n  "),t+=e.loop+";    ",n.length&&(t+="\n    }"),t+="\n  }    ",se.nonEnumShadows){for(t+="\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      ",k=0;k<7;k++)t+="\n    index = '"+e.shadowedProps[k]+"';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))",e.useHas||(t+=" || (!nonEnum[index] && iterable[index] !== objectProto[index])"),t+=") {\n      "+e.loop+";\n    }      ";t+="\n  }    "}return(e.array||se.nonEnumArgs)&&(t+="\n}"),t+=e.bottom+";\nreturn result"};function ae(e){var r=e[0],o=e[2],i=e[4];function s(){if(o){var e=I(o);G.apply(e,arguments)}if(this instanceof s){var t=ue(r.prototype),n=r.apply(t,e||arguments);return Ne(n)?n:t}return r.apply(i,e||arguments)}return ye(s,e),s}function le(e,n,r,o,i){if(r){var s=r(e);if(void 0!==s)return s}if(!Ne(e))return e;var t=V.call(e);if(!f[t]||!se.nodeClass&&z(e))return e;var c=re[t];switch(t){case S:case A:return new c(+e);case O:case $:return new c(e);case P:return(s=c(e.source,h.exec(e))).lastIndex=e.lastIndex,s}var a=Ce(e);if(n){var l=!o;o||(o=M()),i||(i=M());for(var u=o.length;u--;)if(o[u]==e)return i[u];s=a?c(e.length):{}}else s=a?I(e):Ae({},e);return a&&(J.call(e,"index")&&(s.index=e.index),J.call(e,"input")&&(s.input=e.input)),n&&(o.push(e),i.push(s),(a?Se:Pe)(e,function(e,t){s[t]=le(e,n,r,o,i)}),l&&(H(o),H(i))),s}function ue(e,t){return Ne(e)?ee(e):{}}function he(o,i,e){if("function"!=typeof o)return Ie;if(void 0===i||!("prototype"in o))return o;var t=o.__bindData__;if(void 0===t&&(se.funcNames&&(t=!o.name),!(t=t||!se.funcDecomp))){var n=K.call(o);se.funcNames||(t=!r.test(n)),t||(t=s.test(n),ye(o,t))}if(!1===t||!0!==t&&1&t[1])return o;switch(e){case 1:return function(e){return o.call(i,e)};case 2:return function(e,t){return o.call(i,e,t)};case 3:return function(e,t,n){return o.call(i,e,t,n)};case 4:return function(e,t,n,r){return o.call(i,e,t,n,r)}}return He(o,i)}function fe(e){var r=e[0],o=e[1],i=e[2],s=e[3],c=e[4],a=e[5],l=1&o,u=2&o,h=4&o,f=8&o,p=r;function d(){var e=l?c:this;if(i){var t=I(i);G.apply(t,arguments)}if((s||h)&&(t||(t=I(arguments)),s&&G.apply(t,s),h&&t.length<a))return o|=16,fe([r,f?o:-4&o,t,null,c,a]);if(t||(t=arguments),u&&(r=e[p]),this instanceof d){e=ue(r.prototype);var n=r.apply(e,t);return Ne(n)?n:e}return r.apply(e,t)}return ye(d,e),d}function pe(r,e,o,i,s,c){if(o){var a=o(r,e);if(void 0!==a)return!!a}if(r===e)return 0!==r||1/r==1/e;var t=typeof e;if(!(r!=r||r&&N[typeof r]||e&&N[t]))return!1;if(null==r||null==e)return r===e;var n=V.call(r),l=V.call(e);if(n==j&&(n=T),l==j&&(l=T),n!=l)return!1;switch(n){case S:case A:return+r==+e;case O:return r!=+r?e!=+e:0==r?1/r==1/e:r==+e;case P:case $:return r==String(e)}var u=n==F;if(!u){var h=J.call(r,"__wrapped__"),f=J.call(e,"__wrapped__");if(h||f)return pe(h?r.__wrapped__:r,f?e.__wrapped__:e,o,i,s,c);if(n!=T||!se.nodeClass&&(z(r)||z(e)))return!1;var p=!se.argsObject&&be(r)?Object:r.constructor,d=!se.argsObject&&be(e)?Object:e.constructor;if(p!=d&&!($e(p)&&p instanceof p&&$e(d)&&d instanceof d)&&"constructor"in r&&"constructor"in e)return!1}var m=!s;s||(s=M()),c||(c=M());for(var v=s.length;v--;)if(s[v]==r)return c[v]==e;var g=0;if(a=!0,s.push(r),c.push(e),u){if(v=r.length,g=e.length,(a=g==v)||i)for(;g--;){var y=v,b=e[g];if(i)for(;y--&&!(a=pe(r[y],b,o,i,s,c)););else if(!(a=pe(r[g],b,o,i,s,c)))break}}else Te(e,function(e,t,n){if(J.call(n,t))return g++,a=J.call(r,t)&&pe(r[t],e,o,i,s,c)}),a&&!i&&Te(r,function(e,t,n){if(J.call(n,t))return a=-1<--g});return s.pop(),c.pop(),m&&(H(s),H(c)),a}function de(e,t,n,r,o,i){var s=1&t,c=4&t,a=16&t,l=32&t;if(!(2&t)&&!$e(e))throw new TypeError;a&&!n.length&&(t&=-17,a=n=!1),l&&!r.length&&(t&=-33,l=r=!1);var u=e&&e.__bindData__;return u&&!0!==u?((u=I(u))[2]&&(u[2]=I(u[2])),u[3]&&(u[3]=I(u[3])),!s||1&u[1]||(u[4]=o),!s&&1&u[1]&&(t|=8),!c||4&u[1]||(u[5]=i),a&&G.apply(u[2]||(u[2]=[]),n),l&&Q.apply(u[3]||(u[3]=[]),r),u[1]|=t,de.apply(null,u)):(1==t||17===t?ae:fe)([e,t,n,r,o,i])}function me(){u.shadowedProps=i,u.array=u.bottom=u.loop=u.top="",u.init="iterable",u.useHas=!0;for(var e,t=0;e=arguments[t];t++)for(var n in e)u[n]=e[n];var r=u.args;return u.firstArg=/^[^,]+/.exec(r)[0],Function("baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+r+") {\n"+ce(u)+"\n}")(he,c,R,J,o,be,Ce,Ue,u.keys,W,N,oe,$,B,V)}function ve(e){return je[e]}function ge(e){return"function"==typeof e&&Z.test(e)}ee||(ue=function(){function n(){}return function(e){if(Ne(e)){n.prototype=e;var t=new n;n.prototype=null}return t||d.Object()}}());var ye=Y?function(e,t){l.value=t,Y(e,"__bindData__",l)}:qe;function be(e){return e&&"object"==typeof e&&"number"==typeof e.length&&V.call(e)==j||!1}se.argsClass||(be=function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&J.call(e,"callee")&&!X.call(e,"callee")||!1});var Ce=te||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&V.call(e)==F||!1},we=me({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"}),xe=ne?function(e){return Ne(e)?se.enumPrototypes&&"function"==typeof e||se.nonEnumArgs&&e.length&&be(e)?we(e):ne(e):[]}:we,ke={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3)",array:"typeof length == 'number'",keys:xe,loop:"if (callback(iterable[index], index, collection) === false) return result"},_e={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",keys:xe,loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"},Ee={top:"if (!objectTypes[typeof iterable]) return result;\n"+ke.top,array:!1},je={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Fe=RegExp("["+xe(je).join("")+"]","g"),Se=me(ke),Ae=me(_e,{top:_e.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"});var Oe=me(_e),Te=me(ke,Ee,{useHas:!1}),Pe=me(ke,Ee);function $e(e){return"function"==typeof e}function Ne(e){return!(!e||!N[typeof e])}function Ue(e){return"string"==typeof e||e&&"object"==typeof e&&V.call(e)==$||!1}function Le(e){for(var t=-1,n=xe(e),r=n.length,o=Array(r);++t<r;)o[t]=e[n[t]];return o}function De(e,r,t){var o=[];if(r=ie.createCallback(r,t,3),Ce(e))for(var n=-1,i=e.length;++n<i;){var s=e[n];r(s,n,e)&&o.push(s)}else Se(e,function(e,t,n){r(e,t,n)&&o.push(e)});return o}function Me(e,r,t){var o;if(r=ie.createCallback(r,t,3),!Ce(e))return Se(e,function(e,t,n){if(r(e,t,n))return o=e,!1}),o;for(var n=-1,i=e.length;++n<i;){var s=e[n];if(r(s,n,e))return s}}function ze(e,t,n){if(t&&void 0===n&&Ce(e))for(var r=-1,o=e.length;++r<o&&!1!==t(e[r],r,e););else Se(e,t,n);return e}function He(e,t){return 2<arguments.length?de(e,17,I(arguments,2),null,t):de(e,1,null,null,t)}function Ie(e){return e}function qe(){}function Re(t){return function(e){return e[t]}}$e(/x/)&&($e=function(e){return"function"==typeof e&&V.call(e)==a}),ie.assign=Ae,ie.bind=He,ie.createCallback=function(r,e,t){var n=typeof r;if(null==r||"function"==n)return he(r,e,t);if("object"!=n)return Re(r);var o=xe(r),i=o[0],s=r[i];return 1!=o.length||s!=s||Ne(s)?function(e){for(var t=o.length,n=!1;t--&&(n=pe(e[o[t]],r[o[t]],null,!0)););return n}:function(e){var t=e[i];return s===t&&(0!==s||1/s==1/t)}},ie.defaults=Oe,ie.filter=De,ie.forEach=ze,ie.forIn=Te,ie.forOwn=Pe,ie.keys=xe,ie.property=Re,ie.reject=function(e,r,t){return r=ie.createCallback(r,t,3),De(e,function(e,t,n){return!r(e,t,n)})},ie.values=Le,ie.each=ze,ie.extend=Ae,ie.select=De,ie.clone=function(e,t,n,r){return"boolean"!=typeof t&&null!=t&&(r=n,n=t,t=!1),le(e,t,"function"==typeof n&&he(n,r,1))},ie.cloneDeep=function(e,t,n){return le(e,!0,"function"==typeof t&&he(t,n,1))},ie.escape=function(e){return null==e?"":String(e).replace(Fe,ve)},ie.find=Me,ie.identity=Ie,ie.isArguments=be,ie.isArray=Ce,ie.isFunction=$e,ie.isObject=Ne,ie.isString=Ue,ie.noop=qe,ie.template=function(s,e,t){var n=ie.templateSettings;s=String(s||""),t=Oe({},t,n);var c,r=Oe({},t.imports,n.imports),o=xe(r),i=Le(r),a=0,l=t.interpolate||x,u="__p += '",h=RegExp((t.escape||x).source+"|"+l.source+"|"+(l===w?C:x).source+"|"+(t.evaluate||x).source+"|$","g");s.replace(h,function(e,t,n,r,o,i){return n||(n=r),u+=s.slice(a,i).replace(_,D),t&&(u+="' +\n__e("+t+") +\n'"),o&&(c=!0,u+="';\n"+o+";\n__p += '"),n&&(u+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),a=i+e.length,e}),u+="';\n";var f=t.variable,p=f;p||(u="with ("+(f="obj")+") {\n"+u+"\n}\n"),u=(c?u.replace(g,""):u).replace(y,"$1").replace(b,"$1;"),u="function("+f+") {\n"+(p?"":f+" || ("+f+" = {});\n")+"var __t, __p = '', __e = _.escape"+(c?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+u+"return __p\n}";var d="\n/*\n//# sourceURL="+(t.sourceURL||"/lodash/template/source["+E+++"]")+"\n*/";try{var m=Function(o,"return "+u+d).apply(v,i)}catch(e){throw e.source=u,e}return e?m(e):(m.source=u,m)},ie.detect=Me,ie.findWhere=Me,ie.VERSION="2.4.1",e&&m&&(U?(m.exports=ie)._=ie:e._=ie)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(e,t,n){var r=e("indexof"),o=/\s+/,i=Object.prototype.toString;function s(e){if(!e)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}t.exports=function(e){return new s(e)},s.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array();return~r(t,e)||t.push(e),this.el.className=t.join(" "),this},s.prototype.remove=function(e){if("[object RegExp]"==i.call(e))return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),n=r(t,e);return~n&&t.splice(n,1),this.el.className=t.join(" "),this},s.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},s.prototype.toggle=function(e,t){return this.list?void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e):void 0!==t?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this},s.prototype.array=function(){var e=this.el.className.replace(/^\s+|\s+$/g,"").split(o);return""===e[0]&&e.shift(),e},s.prototype.has=s.prototype.contains=function(e){return this.list?this.list.contains(e):!!~r(this.array(),e)}},{indexof:46}],6:[function(e,t,n){var o=e("matches-selector");t.exports=function(e,t,n,r){for(e=n?{parentNode:e}:e,r=r||document;(e=e.parentNode)&&e!==document;){if(o(e,t))return e;if(e===r)return}}},{"matches-selector":32}],7:[function(e,t,n){var o=e("debug")("css"),r=e("./lib/style"),i=e("./lib/css");function s(e,t){for(var n in t)r(e,n,t[n]);return e}t.exports=function(e,t,n){if(!e)return;if(void 0!==n){var r={};return r[t]=n,o("setting styles %j",r),s(e,r)}if("object"==typeof t)return o("setting styles %j",t),s(e,t);return o("getting %s",t),i(e,t)}},{"./lib/css":9,"./lib/style":12,debug:38}],8:[function(s,e,t){var c=s("debug")("css:computed"),a=s("within-document"),l=s("./styles");e.exports=function(e,t,n){var r,o=n||l(e);if(!o)return;r=o.getPropertyValue&&o.getPropertyValue(t)||o[t];if(""===r&&!a(e)){c("element not within document, try finding from style attribute");var i=s("./style");r=i(e,t)}return c("computed value of %s: %s",t,r),void 0===r?r:r+""}},{"./style":12,"./styles":13,debug:38,"within-document":61}],9:[function(h,e,t){var f=h("debug")("css:css"),p=h("to-camel-case"),d=h("./computed"),m=h("./prop");e.exports=function(e,t,n,r){var o,i=h("./hooks"),s=p(t),c=e.style;t=m(t,c);var a=i[t]||i[s];a&&a.get&&(f("get hook provided. use that"),o=a.get(e,!0,n));null==o&&(f("fetch the computed value of %s",t),o=d(e,t));"normal"==o&&v[t]&&(o=v[t],f("normal => %s",o));if(""==n||n){f("converting value: %s into a number",o);var l=parseFloat(o);return!0===n||(u=l,!isNan(parseFloat(u))&&isFinite(u))?l||0:o}var u;return o};var v={letterSpacing:0,fontWeight:400}},{"./computed":8,"./hooks":10,"./prop":11,debug:38,"to-camel-case":55}],10:[function(e,t,n){var r=e("each"),c=e("./css"),o={position:"absolute",visibility:"hidden",display:"block"},i=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,a=new RegExp("^("+i+")(?!px)[a-z%]+$","i"),l=new RegExp("^("+i+")(.*)$","i"),u=/^(none|table(?!-c[ea]).+)/,h=(e("./styles"),e("./support")),f=e("./swap"),p=e("./computed"),d=["Top","Right","Bottom","Left"];function m(e,t,n){var r=!0,o="width"===t?e.offsetWidth:e.offsetHeight,i=p(e),s=h.boxSizing&&"border-box"===c(e,"boxSizing");if(o<=0||null==o){if(((o=p(e,t,i))<0||null==o)&&(o=e.style[t]),a.test(o))return o;r=s&&(h.boxSizingReliable()||o===e.style[t]),o=parseFloat(o)||0}return(o+=v(e,t,n=n||(s?"border":"content"),r,i))+"px"}function v(e,t,n,r,o){for(var i=n===(r?"border":"content")?4:"width"==t?1:0,s=0;i<4;i+=2)"margin"===n&&(s+=c(e,n+d[i],!0,o)),r?("content"===n&&(s-=c(e,"padding"+d[i],!0,o)),"margin"!==n&&(s-=c(e,"border"+d[i]+"Width",!0,o))):(s+=c(e,"padding"+d[i],!0,o),"padding"!==n&&(s+=c(e,"border"+d[i]+"Width",!0,o)));return s}r(["width","height"],function(s){n[s]={},n[s].get=function(e,t,n){if(t)return 0==e.offsetWidth&&u.test(c(e,"display"))?f(e,o,function(){return m(e,s,n)}):m(e,s,n)},n[s].set=function(e,t,n){var r,o,i=n&&i(e);return r=t,n&&v(e,s,n,"border-box"==c(e,"boxSizing",!1,i),i),(o=l.exec(r))?Math.max(0,o[1])+(o[2]||"px"):r}}),n.opacity={},n.opacity.get=function(e,t){if(t){var n=p(e,"opacity");return""==n?"1":n}}},{"./computed":8,"./css":9,"./styles":13,"./support":14,"./swap":15,each:27}],11:[function(e,t,n){var r=e("debug")("css:prop"),o=(e("to-camel-case"),e("./vendor"));t.exports=function(e,t){return e=i[e]||(i[e]=o(e,t)),r("transform property: %s => %s",e,t),e};var i={float:"cssFloat"in document.documentElement.style?"cssFloat":"styleFloat"}},{"./vendor":16,debug:38,"to-camel-case":55}],12:[function(e,t,n){var a=e("debug")("css:style"),l=e("to-camel-case"),u=e("./support"),h=e("./prop"),f=e("./hooks");t.exports=function(e,t,n,r){if(!e||3===e.nodeType||8===e.nodeType||!e.style)return;var o=l(t),i=e.style,s=typeof n;if(!n)return function(e,t,n,r){var o,i=e.style,s=f[t]||f[n];if(s&&s.get&&void 0!==(o=s.get(e,!1,r)))return a("get hook defined, returning: %s",o),o;return o=i[t],a("getting %s",o),o}(e,t,o,r);t=h(t,i);var c=f[t]||f[o];"number"!=s||p[o]||(a('adding "px" to end of number'),n+="px");u.clearCloneStyle||""!==n||0!==t.indexOf("background")||(a('set property (%s) value to "inherit"',t),i[t]="inherit");c&&c.set&&void 0===(n=c.set(e,n,r))||(a("set hook defined. setting property (%s) to %s",t,n),i[t]="",i[t]=n)};var p={columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0}},{"./hooks":10,"./prop":11,"./support":14,debug:38,"to-camel-case":55}],13:[function(e,t,n){t.exports=function(e){return window.getComputedStyle?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle}},{}],14:[function(e,t,n){var r,o,i=document.documentElement,s=document.createElement("div"),c=document.createElement("div");function a(){c.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",i.appendChild(s);var e=window.getComputedStyle(c,null);o="1%"!==e.top,r="4px"===e.width,i.removeChild(s)}c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",n.clearCloneStyle="content-box"===c.style.backgroundClip,s.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",s.appendChild(c),n.pixelPosition=function(){return null==o&&a(),o},n.boxSizingReliable=function(){return null==r&&a(),r},n.reliableMarginRight=function(){var e,t=c.appendChild(document.createElement("div"));return t.style.cssText=c.style.cssText=divReset,t.style.marginRight=t.style.width="0",c.style.width="1px",i.appendChild(s),e=!parseFloat(window.getComputedStyle(t,null).marginRight),i.removeChild(s),c.innerHTML="",e}},{}],15:[function(e,t,n){t.exports=function(e,t,n,r){for(var o in t)old[o]=e.style[o],e.style[o]=t[o];for(o in ret=n.apply(e,r||[]),t)e.style[o]=old[o];return ret}},{}],16:[function(e,t,n){var i=["Webkit","O","Moz","ms"];t.exports=function(e,t){if(t[e])return e;var n=e[0].toUpperCase()+e.slice(1),r=e,o=i.length;for(;o--;)if((e=i[o]+n)in t)return e;return r}},{}],17:[function(e,t,n){var i=e("closest"),s=e("event");n.bind=function(n,r,e,o,t){return s.bind(n,e,function(e){var t=e.target||e.srcElement;e.delegateTarget=i(t,r,!0,n),e.delegateTarget&&o.call(n,e)},t)},n.unbind=function(e,t,n,r){s.unbind(e,t,n,r)}},{closest:6,event:29}],18:[function(e,t,n){var o=e("domify"),r=e("each"),s=(e("event"),e("keys")),i=e("query"),c=e("trim"),a=[].slice,l=Array.isArray||function(e){return!!e&&"[object Array]"===Object.prototype.toString.call(e)},u=["id","src","rel","cols","rows","type","name","href","title","style","width","height","action","method","tabindex","placeholder"],h=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/;function f(e,t){if(l(e))return new p(e);if(e instanceof p)return e;if(e.nodeName)return new p([e]);if("string"!=typeof e)throw new TypeError("invalid selector");var n=c.left(e);if(function(e){if("<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&3<=e.length)return!0;var t=h.exec(e);return!(!t||!t[1])}(n))return new p([o(n)],n);var r=t?t instanceof p?t[0]:t:document;return new p(i.all(e,r),e)}function p(e,t){e=e||[];for(var n=this.length=e.length,r=0;r<n;r++)this[r]=e[r];this.selector=t}(t.exports=f).List=p,f.attrs=u,f.use=function(e,t){var n,r=[];2==arguments.length?(r.push(e),(n={})[e]=t,t=n):e.name?(e=(t=e).name,r.push(e),(n={})[e]=t,t=n):(r=s(e),t=e);for(var o=0,i=r.length;o<i;o++)p.prototype[r[o]]=t[r[o]];return this},p.prototype.dom=f,p.prototype.length=0,p.prototype.splice=Array.prototype.splice,p.prototype.toArray=function(){return a.call(this)},r(u,function(t){p.prototype[t]=function(e){return 0==arguments.length?this.attr(t):this.attr(t,e)}}),f.use(e("./lib/attributes")),f.use(e("./lib/classes")),f.use(e("./lib/events")),f.use(e("./lib/manipulate")),f.use(e("./lib/traverse"))},{"./lib/attributes":19,"./lib/classes":20,"./lib/events":21,"./lib/manipulate":22,"./lib/traverse":23,domify:44,each:27,event:29,keys:25,query:34,trim:59}],19:[function(e,t,n){var r=e("value");n.attr=function(t,n){return 1==arguments.length?this[0]&&this[0].getAttribute(t):null==n?this.removeAttr(t):this.forEach(function(e){e.setAttribute(t,n)})},n.removeAttr=function(t){return this.forEach(function(e){e.removeAttribute(t)})},n.prop=function(t,n){return 1==arguments.length?this[0]&&this[0][t]:this.forEach(function(e){e[t]=n})},n.val=n.value=function(t){return 0==arguments.length?this[0]?r(this[0]):void 0:this.forEach(function(e){r(e,t)})}},{value:36}],20:[function(e,t,n){var o=e("classes");n.addClass=function(t){return this.forEach(function(e){e._classes=e._classes||o(e),e._classes.add(t)})},n.removeClass=function(t){return this.forEach(function(e){e._classes=e._classes||o(e),e._classes.remove(t)})},n.toggleClass=function(t,e){var n="toggle";return 2==arguments.length&&(n=e?"add":"remove"),this.forEach(function(e){e._classes=e._classes||o(e),e._classes[n](t)})},n.hasClass=function(e){for(var t,n=0,r=this.length;n<r;n++)if((t=this[n])._classes=t._classes||o(t),t._classes.has(e))return!0;return!1}},{classes:24}],21:[function(e,t,n){var i=e("event"),s=e("delegate");n.on=function(t,n,r,o){return"string"==typeof n?this.forEach(function(e){r._delegate=s.bind(e,n,t,r,o)}):(o=r,r=n,this.forEach(function(e){i.bind(e,t,r,o)}))},n.off=function(t,e,n,r){return"string"==typeof e?this.forEach(function(e){s.unbind(e,t,n._delegate,r)}):(r=n,n=e,this.forEach(function(e){i.unbind(e,t,n,r)}))}},{delegate:17,event:29}],22:[function(e,t,n){e("value");var r=e("css"),s=e("text");n.text=function(n){if(1==arguments.length)return this.forEach(function(e){if(11==e.nodeType){for(var t;t=e.firstChild;)e.removeChild(t);e.appendChild(document.createTextNode(n))}else s(e,n)});var t="";return this.forEach(function(e){11==e.nodeType?t+=function e(t){var n="";var r=t.nodeType;var o;switch(r){case 1:case 9:n=s(t);break;case 11:n=t.textContent||t.innerText;break;case 3:case 4:return t.nodeValue;default:for(;o=t[i++];)n+=e(o)}return n}(e.firstChild):t+=s(e)}),t},n.html=function(t){return 1==arguments.length?this.forEach(function(e){e.innerHTML=t}):this[0]&&this[0].innerHTML},n.css=function(t,n){return n||"object"==typeof t?(this.forEach(function(e){r(e,t,n)}),this):r(this[0],t)},n.prepend=function(e){var r=this.dom;return this.forEach(function(t,n){r(e).forEach(function(e){e=n?e.cloneNode(!0):e,t.children.length?t.insertBefore(e,t.firstChild):t.appendChild(e)})}),this},n.append=function(e){var r=this.dom;return this.forEach(function(t,n){r(e).forEach(function(e){e=n?e.cloneNode(!0):e,t.appendChild(e)})}),this},n.insertAfter=function(e){var t=this.dom;return this.forEach(function(n){t(e).forEach(function(e,t){e.parentNode&&(n=t?n.cloneNode(!0):n,e.parentNode.insertBefore(n,e.nextSibling))})}),this},n.appendTo=function(e){return this.dom(e).append(this),this},n.replace=function(e){var o=this;return this.dom(e).forEach(function(e,t){var n=o[t],r=n.parentNode;r&&(e=t?e.cloneNode(!0):e,r.replaceChild(e,n))}),this},n.empty=function(){return this.forEach(function(e){s(e,"")})},n.remove=function(){return this.forEach(function(e){var t=e.parentNode;t&&t.removeChild(e)})},n.clone=function(){var e=this.map(function(e){return e.cloneNode(!0)});return this.dom(e)},n.focus=function(){return this[0].focus(),this}},{css:7,text:54,value:36}],23:[function(e,t,n){var r=Array.prototype,o=e("each"),i=e("traverse"),s=e("to-function"),c=e("matches-selector");n.find=function(e){return this.dom(e,this)},n.is=function(e){for(var t,n=0;t=this[n];n++)if(c(t,e))return!0;return!1},n.parent=function(e,t){return this.dom(i("parentNode",this[0],e,t||1))},n.next=function(e,t){return this.dom(i("nextSibling",this[0],e,t||1))},n.prev=n.previous=function(e,t){return this.dom(i("previousSibling",this[0],e,t||1))},n.each=function(e){for(var t,n=this.dom,r=0,o=this.length;r<o;r++)t=n(this[r]),e.call(t,t,r);return this},n.forEach=function(e){for(var t=0,n=this.length;t<n;t++)e.call(this[t],this[t],t);return this},n.map=function(e){e=s(e);for(var t=this.dom,n=[],r=0,o=this.length;r<o;r++)n.push(e.call(t(this[r]),this[r],r));return this.dom(n)},n.filter=n.select=function(e){e=s(e);for(var t=this.dom,n=[],r=0,o=this.length;r<o;r++)e.call(t(this[r]),this[r],r)&&n.push(this[r]);return this.dom(n)},n.reject=function(e){var t,n=this.dom,r=[],o=this.length;if("string"==typeof e&&(e=s(e)),e)for(t=0;t<o;t++)e.call(n(this[t]),this[t],t)||r.push(this[t]);else for(t=0;t<o;t++)this[t]!=e&&r.push(this[t]);return this.dom(r)},n.at=function(e){return this.dom(this[e])},n.first=function(){return this.dom(this[0])},n.last=function(){return this.dom(this[this.length-1])},o(["push","pop","shift","splice","unshift","reverse","sort","toString","concat","join","slice"],function(e){n[e]=function(){return r[e].apply(this.toArray(),arguments)}})},{each:27,"matches-selector":48,"to-function":56,traverse:62}],24:[function(e,t,n){var r=e("indexof"),o=/\s+/,i=Object.prototype.toString;function s(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}t.exports=function(e){return new s(e)},s.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array();return~r(t,e)||t.push(e),this.el.className=t.join(" "),this},s.prototype.remove=function(e){if("[object RegExp]"==i.call(e))return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),n=r(t,e);return~n&&t.splice(n,1),this.el.className=t.join(" "),this},s.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},s.prototype.toggle=function(e,t){return this.list?void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e):void 0!==t?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this},s.prototype.array=function(){var e=this.el.className.replace(/^\s+|\s+$/g,"").split(o);return""===e[0]&&e.shift(),e},s.prototype.has=s.prototype.contains=function(e){return this.list?this.list.contains(e):!!~r(this.array(),e)}},{indexof:30}],25:[function(e,t,n){"use strict";var p=Object.prototype.hasOwnProperty,d=Object.prototype.toString,m=e("./isArguments"),v=!{toString:null}.propertyIsEnumerable("toString"),g=function(){}.propertyIsEnumerable("prototype"),y=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=function(e){var t=null!==e&&"object"==typeof e,n="[object Function]"===d.call(e),r=m(e),o=t&&"[object String]"===d.call(e),i=[];if(!t&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var s=g&&n;if(o&&0<e.length&&!p.call(e,0))for(var c=0;c<e.length;++c)i.push(String(c));if(r&&0<e.length)for(var a=0;a<e.length;++a)i.push(String(a));else for(var l in e)s&&"prototype"===l||!p.call(e,l)||i.push(String(l));if(v)for(var u=e.constructor,h=u&&u.prototype===e,f=0;f<y.length;++f)h&&"constructor"===y[f]||!p.call(e,y[f])||i.push(y[f]);return i};r.shim=function(){return Object.keys||(Object.keys=r),Object.keys||r},t.exports=r},{"./isArguments":26}],26:[function(e,t,n){"use strict";var r=Object.prototype.toString;t.exports=function(e){var t=r.call(e),n="[object Arguments]"===t;return n||(n="[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&0<=e.length&&"[object Function]"===r.call(e.callee)),n}},{}],27:[function(t,e,n){try{var r=t("type")}catch(e){r=t("component-type")}var o=t("to-function"),i=Object.prototype.hasOwnProperty;function s(e,t,n){for(var r=0;r<e.length;++r)t.call(n,e[r],r)}e.exports=function(e,t,n){switch(t=o(t),n=n||this,r(e)){case"array":return s(e,t,n);case"object":return"number"==typeof e.length?s(e,t,n):function(e,t,n){for(var r in e)i.call(e,r)&&t.call(n,r,e[r])}(e,t,n);case"string":return function(e,t,n){for(var r=0;r<e.length;++r)t.call(n,e.charAt(r),r)}(e,t,n)}}},{"component-type":35,"to-function":56,type:35}],28:[function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}(t.exports=r).prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},r.prototype.once=function(e,t){var n=this;function r(){n.off(e,r),t.apply(this,arguments)}return this._callbacks=this._callbacks||{},r.fn=t,this.on(e,r),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks[e];if(!r)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var o=0;o<r.length;o++)if((n=r[o])===t||n.fn===t){r.splice(o,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n)for(var r=0,o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,t);return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],29:[function(e,t,n){var o=window.addEventListener?"addEventListener":"attachEvent",i=window.removeEventListener?"removeEventListener":"detachEvent",s="addEventListener"!==o?"on":"";n.bind=function(e,t,n,r){return e[o](s+t,n,r||!1),n},n.unbind=function(e,t,n,r){return e[i](s+t,n,r||!1),n}},{}],30:[function(e,t,n){t.exports=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},{}],31:[function(e,t,n){t.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],32:[function(t,e,n){try{var o=t("query")}catch(e){o=t("component-query")}var r=Element.prototype,i=r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector;e.exports=function(e,t){if(!e||1!==e.nodeType)return!1;if(i)return i.call(e,t);for(var n=o.all(t,e.parentNode),r=0;r<n.length;++r)if(n[r]==e)return!0;return!1}},{"component-query":34,query:34}],33:[function(e,t,n){var s=/\b(Array|Date|Object|Math|JSON)\b/g;t.exports=function(e,t){var n,r,o,i=function(e){for(var t=[],n=0;n<e.length;n++)~t.indexOf(e[n])||t.push(e[n]);return t}(e.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\//g,"").replace(s,"").match(/[a-zA-Z_]\w*/g)||[]);return t&&"string"==typeof t&&(n=t,t=function(e){return n+e}),t?(r=i,o=t,e.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\/|[a-zA-Z_]\w*/g,function(e){return"("==e[e.length-1]?o(e):~r.indexOf(e)?o(e):e})):i}},{}],34:[function(e,t,n){function r(e,t){return t.querySelector(e)}(n=t.exports=function(e,t){return r(e,t=t||document)}).all=function(e,t){return(t=t||document).querySelectorAll(e)},n.engine=function(e){if(!e.one)throw new Error(".one callback required");if(!e.all)throw new Error(".all callback required");return r=e.one,n.all=e.all,n}},{}],35:[function(e,t,n){var r=Object.prototype.toString;t.exports=function(e){switch(r.call(e)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object String]":return"string"}return null===e?"null":void 0===e?"undefined":e&&1===e.nodeType?"element":e===Object(e)?"object":typeof e}},{}],36:[function(e,t,n){var o=e("type");function i(e){var t="array"==o(e)||"object"==o(e);t&&(e=e[0]);var n=e.nodeName.toLowerCase(),r=e.getAttribute("type");return t&&r&&"radio"==r.toLowerCase()?"radiogroup":"input"==n&&r&&"checkbox"==r.toLowerCase()?"checkbox":"input"==n&&r&&"radio"==r.toLowerCase()?"radio":"select"==n?"select":n}t.exports=function(e,t){return 2==arguments.length?function(e,t){switch(i(e)){case"checkbox":case"radio":e.checked=!!t;break;case"radiogroup":for(var n,r=0;n=e[r];r++)n.checked=n.value===t;break;case"select":for(var o,r=0;o=e.options[r];r++)o.selected=o.value===t;break;default:e.value=t}}(e,t):function(e){switch(i(e)){case"checkbox":case"radio":if(e.checked){var t=e.getAttribute("value");return null==t||t}return!1;case"radiogroup":for(var n,r=0;n=e[r];r++)if(n.checked)return n.value;break;case"select":for(var o,r=0;o=e.options[r];r++)if(o.selected)return o.value;break;default:return e.value}}(e)}},{type:35}],37:[function(e,t,n){t.exports=function(e,t,n){return((n=window.getComputedStyle)?n(e):e.currentStyle)[t.replace(/-(\w)/gi,function(e,t){return t.toUpperCase()})]}},{}],38:[function(n,r,i){(function(t){function e(){var e;try{e=i.storage.debug}catch(e){}return!e&&void 0!==t&&"env"in t&&(e=t.env.DEBUG),e}(i=r.exports=n("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},i.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+i.humanize(this.diff),!t)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var r=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(r++,"%c"===e&&(o=r))}),e.splice(o,0,n)},i.save=function(e){try{null==e?i.storage.removeItem("debug"):i.storage.debug=e}catch(e){}},i.load=e,i.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},i.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),i.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],i.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},i.enable(e())}).call(this,n("_process"))},{"./debug":39,_process:52}],39:[function(e,t,a){function n(e){var r;function c(){if(c.enabled){var o=c,e=+new Date,t=e-(r||e);o.diff=t,o.prev=r,o.curr=e,r=e;for(var i=new Array(arguments.length),n=0;n<i.length;n++)i[n]=arguments[n];i[0]=a.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var s=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(e,t){if("%%"===e)return e;s++;var n=a.formatters[t];if("function"==typeof n){var r=i[s];e=n.call(o,r),i.splice(s,1),s--}return e}),a.formatArgs.call(o,i),(c.log||a.log||console.log.bind(console)).apply(o,i)}}return c.namespace=e,c.enabled=a.enabled(e),c.useColors=a.useColors(),c.color=function(e){var t,n=0;for(t in e)n=(n<<5)-n+e.charCodeAt(t),n|=0;return a.colors[Math.abs(n)%a.colors.length]}(e),c.destroy=o,"function"==typeof a.init&&a.init(c),a.instances.push(c),c}function o(){var e=a.instances.indexOf(this);return-1!==e&&(a.instances.splice(e,1),!0)}(a=t.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},a.disable=function(){a.enable("")},a.enable=function(e){var t;a.save(e),a.names=[],a.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length;for(t=0;t<r;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?a.skips.push(new RegExp("^"+e.substr(1)+"$")):a.names.push(new RegExp("^"+e+"$")));for(t=0;t<a.instances.length;t++){var o=a.instances[t];o.enabled=a.enabled(o.namespace)}},a.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=a.skips.length;t<n;t++)if(a.skips[t].test(e))return!1;for(t=0,n=a.names.length;t<n;t++)if(a.names[t].test(e))return!0;return!1},a.humanize=e("ms"),a.instances=[],a.names=[],a.skips=[],a.formatters={}},{ms:49}],40:[function(e,t,n){t.exports='<div class="confirmation-actions">\n  <button class="cancel">Cancel</button>\n  <button class="ok main">Ok</button>\n</div>'},{}],41:[function(e,t,n){var r=e("dialog").Dialog,o=e("event"),i=e("query"),s=e("./confirmation.html");function c(e){r.call(this,e),this.focus("cancel")}e("inherit")((t.exports=function(e,t){switch(arguments.length){case 2:return new c({title:e,message:t});case 1:return new c({message:e})}}).Confirmation=c,r),c.prototype.focus=function(e){return this._focus=e,this},c.prototype.cancel=function(e){return i(".cancel",this.el).innerHTML=e,this},c.prototype.ok=function(e){return i(".ok",this.el).innerHTML=e,this},c.prototype.show=function(e){return r.prototype.show.call(this),i("."+this._focus,this.el).focus(),this.callback=e||function(){},this},c.prototype.render=function(e){var t=this;r.prototype.render.call(this,e),this._classes.add("confirmation"),this.el.insertAdjacentHTML("beforeend",s),this.on("close",function(){t.emit("cancel"),t.callback(!1)}),this.on("escape",function(){t.emit("cancel"),t.callback(!1)}),o.bind(i(".cancel",this.el),"click",function(e){e.preventDefault(),t.emit("cancel"),t.callback(!1),t.hide()}),o.bind(i(".ok",this.el),"click",function(e){e.preventDefault(),t.emit("ok"),t.callback(!0),t.hide()})}},{"./confirmation.html":40,dialog:42,event:29,inherit:31,query:34}],42:[function(t,e,n){var r,o=t("emitter"),i=t("overlay"),s=t("domify"),c=t("event"),a=t("classes"),l=t("query");function u(e){o.call(this),e=e||{},this.template=t("./template.html"),this.el=s(this.template),this._classes=a(this.el),this.render(e),r&&!r.hiding&&r.hide(),n.effect&&this.effect(n.effect),(r=this).on("escape",function(){r.hide()})}(((n=e.exports=function(e,t){switch(arguments.length){case 2:return new u({title:e,message:t});case 1:return new u({message:e})}}).Dialog=u).prototype=new o).render=function(e){var t=this,n=t.el,r=e.title,o=l(".title",n),i=l("p",n),s=e.message;c.bind(l(".close",n),"click",function(e){e.preventDefault(),t.emit("close"),t.hide()}),o&&(r?o.textContent=r:o.parentNode.removeChild(o)),"string"==typeof s?i.textContent=s:s&&(i.parentNode.insertBefore(s.el||s,i),i.parentNode.removeChild(i))},u.prototype.closable=function(){return this.addClass("closable")},u.prototype.addClass=function(e){return this._classes.add(e),this},u.prototype.effect=function(e){return this._effect=e,this.addClass(e),this},u.prototype.modal=function(){return this._overlay=i(),this},u.prototype.overlay=function(e){var t=this,n=i(e=e||{closable:!0});return n.on("hide",function(){t._overlay=null,t.hide()}),this._overlay=n,this},u.prototype.escapable=function(){var t=this;return t._escKeyCallback=t._escKeyCallback||function(e){e.which=e.which||e.keyCode,27===e.which&&t.emit("escape")},c.bind(document,"keydown",t._escKeyCallback),this},u.prototype.fixed=function(){return this._fixed=!0,this},u.prototype.show=function(){var e=this._overlay;return e&&(e.show(),this._classes.add("modal")),e&&!e.closable||this.escapable(),document.body.appendChild(this.el),this._classes.remove("hide"),this.emit("show"),this},u.prototype.hideOverlay=function(){this._overlay&&(this._overlay.remove(),this._overlay=null)},u.prototype.hide=function(e){var t=this;return t._escKeyCallback&&c.unbind(document,"keydown",t._escKeyCallback),t.hiding=!0,e?setTimeout(function(){t.hide()},e):(t._classes.add("hide"),t._effect?setTimeout(function(){t.remove()},500):t.remove(),t.hideOverlay()),t},u.prototype.remove=function(){return this.el.parentNode&&(this.emit("hide"),this.el.parentNode.removeChild(this.el)),this}},{"./template.html":43,classes:5,domify:44,emitter:28,event:29,overlay:50,query:34}],43:[function(e,t,n){t.exports='<div class="dialog hide">\r\n  <div class="content">\r\n    <span class="title">Title</span>\r\n    <a href="#" class="close">&times;<em>close</em></a>\r\n    <div class="body">\r\n      <p>Message</p>\r\n    </div>\r\n  </div>\r\n</div>\r\n'},{}],44:[function(e,t,n){t.exports=function(e,t){if("string"!=typeof e)throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var r=n[1];if("body"==r){var o=t.createElement("html");return o.innerHTML=e,o.removeChild(o.lastChild)}var i=u[r]||u._default,s=i[0],c=i[1],a=i[2];(o=t.createElement("div")).innerHTML=c+e+a;for(;s--;)o=o.lastChild;if(o.firstChild==o.lastChild)return o.removeChild(o.firstChild);var l=t.createDocumentFragment();for(;o.firstChild;)l.appendChild(o.removeChild(o.firstChild));return l};var r=document.createElement("div");r.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>';var o=!r.getElementsByTagName("link").length;r=void 0;var u={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:o?[1,"X<div>","</div>"]:[0,"",""]};u.td=u.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],u.option=u.optgroup=[1,'<select multiple="multiple">',"</select>"],u.thead=u.tbody=u.colgroup=u.caption=u.tfoot=[1,"<table>","</table>"],u.polyline=u.ellipse=u.polygon=u.circle=u.text=u.line=u.path=u.rect=u.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"]},{}],45:[function(e,t,n){arguments[4][28][0].apply(n,arguments)},{dup:28}],46:[function(e,t,n){arguments[4][30][0].apply(n,arguments)},{dup:30}],47:[function(e,t,n){var a=e("computed-style");t.exports=function(e){var t=a(e,"line-height"),n=parseFloat(t,10);if(t===n+""){var r=e.style.lineHeight;e.style.lineHeight=t+"em",t=a(e,"line-height"),n=parseFloat(t,10),r?e.style.lineHeight=r:delete e.style.lineHeight}if(-1!==t.indexOf("pt")?(n*=4,n/=3):-1!==t.indexOf("mm")?(n*=96,n/=25.4):-1!==t.indexOf("cm")?(n*=96,n/=2.54):-1!==t.indexOf("in")?n*=96:-1!==t.indexOf("pc")&&(n*=16),n=Math.round(n),"normal"===t){var o=e.nodeName,i=document.createElement(o);i.innerHTML="&nbsp;";var s=a(e,"font-size");i.style.fontSize=s;var c=document.body;c.appendChild(i),n=i.offsetHeight,c.removeChild(i)}return n}},{"computed-style":37}],48:[function(e,t,n){"use strict";var r=Element.prototype,o=r.matches||r.matchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector;t.exports=function(e,t){if(o)return o.call(e,t);for(var n=e.parentNode.querySelectorAll(t),r=0;r<n.length;r++)if(n[r]==e)return!0;return!1}},{}],49:[function(e,t,n){var o=36e5,i=864e5;function s(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}t.exports=function(e,t){t=t||{};var n,r=typeof e;if("string"===r&&0<e.length)return function(e){if(100<(e=String(e)).length)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"days":case"day":case"d":return n*i;case"hours":case"hour":case"hrs":case"hr":case"h":return n*o;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*n;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(e);if("number"===r&&!1===isNaN(e))return t.long?s(n=e,i,"day")||s(n,o,"hour")||s(n,6e4,"minute")||s(n,1e3,"second")||n+" ms":function(e){if(i<=e)return Math.round(e/i)+"d";if(o<=e)return Math.round(e/o)+"h";if(6e4<=e)return Math.round(e/6e4)+"m";if(1e3<=e)return Math.round(e/1e3)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],50:[function(e,t,n){var r=e("emitter"),o=e("./template.html"),i=e("domify"),s=e("event"),c=e("classes");function a(e){r.call(this),e=e||{},this.target=e.target||document.body,this.closable=e.closable,this.el=i(o),this.closable&&(s.bind(this.el,"click",this.hide.bind(this)),c(this.el).add("closable"))}(t.exports=function(e){(e=e||{}).nodeName&&(e={target:e});return new a(e)}).Overlay=a,r(a.prototype),a.prototype.show=function(){var e=this;return this.emit("show"),this.target.appendChild(this.el),setTimeout(function(){c(e.el).remove("hidden")}),this},a.prototype.hide=function(){return this.emit("hide"),this.remove()},a.prototype.remove=function(){var e=this;return this.emit("close"),c(this.el).add("hidden"),setTimeout(function(){e.target.removeChild(e.el)},350),this}},{"./template.html":51,classes:5,domify:44,emitter:45,event:29}],51:[function(e,t,n){t.exports='<div class="overlay hidden"></div>\r\n'},{}],52:[function(e,t,n){var r,o,i=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}function a(t){if(r===setTimeout)return setTimeout(t,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(e){r=s}try{o="function"==typeof clearTimeout?clearTimeout:c}catch(e){o=c}}();var l,u=[],h=!1,f=-1;function p(){h&&l&&(h=!1,l.length?u=l.concat(u):f=-1,u.length&&d())}function d(){if(!h){var e=a(p);h=!0;for(var t=u.length;t;){for(l=u,u=[];++f<t;)l&&l[f].run();f=-1,t=u.length}l=null,h=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===c||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new m(e,t)),1!==u.length||h||a(d)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],53:[function(e,t,n){var r="en";(t.exports=function e(t,o,n){"string"==typeof o?(n=o,o={}):o=o||{};n=n||r;e[n]&&(t=e[n][t]||t);return t.replace(/\{([^}]+)\}/g,function(e,t){var n,r=(n=o,new Function("_","return _."+t)(n));return void 0!==r?r:e})}).lang=function(e){if(0==arguments.length)return r;r=e}},{}],54:[function(e,t,n){t.exports=function(e,t){var n=void 0!==e.textContent?"textContent":"innerText";return void 0!==t&&(e[n]=t),e[n]}},{}],55:[function(e,t,n){var r=e("to-space-case");t.exports=function(e){return r(e).replace(/\s(\w)/g,function(e,t){return t.toUpperCase()})}},{"to-space-case":58}],56:[function(t,e,n){var i;try{i=t("props")}catch(e){i=t("component-props")}function r(e){switch({}.toString.call(e)){case"[object Object]":return function(e){var n={};for(var t in e)n[t]="string"==typeof e[t]?o(e[t]):r(e[t]);return function(e){if("object"!=typeof e)return!1;for(var t in n){if(!(t in e))return!1;if(!n[t](e[t]))return!1}return!0}}(e);case"[object Function]":return e;case"[object String]":return/^ *\W+/.test(n=e)?new Function("_","return _ "+n):new Function("_","return "+function(e){var t,n,r,o=i(e);if(!o.length)return"_."+e;for(n=0;n<o.length;n++)r=o[n],e=s(r,e,t="('function' == typeof "+(t="_."+r)+" ? "+t+"() : "+t+")");return e}(n));case"[object RegExp]":return t=e,function(e){return t.test(e)};default:return o(e)}var t,n}function o(t){return function(e){return t===e}}function s(e,t,n){return t.replace(new RegExp("(\\.)?"+e,"g"),function(e,t){return t?e:n})}e.exports=r},{"component-props":33,props:33}],57:[function(e,t,n){t.exports=function(e){if(r.test(e))return e.toLowerCase();i.test(e)&&(t=e,e=t.replace(s,function(e,t){return t?" "+t:""}));var t;o.test(e)&&(n=e,e=n.replace(c,function(e,t,n){return t+" "+n.toLowerCase().split("").join(" ")}));var n;return e.toLowerCase()};var r=/\s/,o=/[a-z][A-Z]/,i=/[\W_]/;var s=/[\W_]+(.|$)/g;var c=/(.)([A-Z]+)/g},{}],58:[function(e,t,n){var r=e("to-no-case");t.exports=function(e){return r(e).replace(/[\W_]+(.|$)/g,function(e,t){return t?" "+t:""})}},{"to-no-case":57}],59:[function(e,t,n){(n=t.exports=function(e){return e.replace(/^\s*|\s*$/g,"")}).left=function(e){return e.replace(/^\s*/,"")},n.right=function(e){return e.replace(/\s*$/,"")}},{}],60:[function(e,t,n){var d=e("line-height");t.exports=function(e,t){t=t||{};var n=d(e),r=e.offsetHeight,o=n*(t.lines||1);if(o<r){for(var i,s=[e],c=[];s.length;){i=s.shift(),c.push(i);for(var a=i.childNodes.length;a--;)s.unshift(i.childNodes[a])}for(var l=c.length-1,u=!1;1<=l;l--){if(3===(i=c[l]).nodeType)for(var h=i.nodeValue.split(" "),f=h.length;f--;){var p=h.slice(0,f).join(" ")+"…";if(i.nodeValue=p,e.offsetHeight<=o){u=!0;break}}if(u||(i.parentNode.removeChild(i),e.offsetHeight<=o&&(u=!0)),u)break}}return e}},{"line-height":47}],61:[function(e,t,n){t.exports=function(e){for(var t=e;t=t.parentNode;)if(t==document)return!0;return!1}},{}],62:[function(e,t,n){var s=e("matches-selector");t.exports=function(e,t,n,r){var o=r||1,i=[];if(!(t=t[e]))return i;do{if(o==i.length)break;1==t.nodeType&&(s(t,n)&&i.push(t),n||i.push(t))}while(t=t[e]);return i}},{"matches-selector":48}],63:[function(e,t,n){t.exports='<li data-comment-id="<%- comment.id %>" class="comment-obj <%- comment.type %>">\n  <div class="comment-body">\n    <div class="author-avatar">\n      <img src="<%- comment.authorAvatarUrl %>">\n      <% if (voting && currentUser && comment.authorId !== currentUser.id){ %>\n        <div class="voting">\n          <span class="votes">0</span>\n          <a href="#" class="action-link upvote", title="Upvote"><i class="icon-angle-up"></i></a>\n          <a href="#" class="action-link downvote", title="Downvote"><i class="icon-angle-down"></i></a>\n        </div>\n      <% } %>\n    </div>\n    <div class="right-of-avatar">\n      <% if (comment.authorUrl) { %>\n        <a class="author-name" href="<%- comment.authorUrl %>">\n          <%- comment.authorName %>\n        </a>\n      <% } else { %>\n        <p class="author-name">\n          <%- comment.authorName %>\n          <% if (comment.createdAt) { %>\n            <small class="ago" data-time="<%- comment.createdAt %>"></small>\n          <% } %>\n        </p>\n      <% } %>\n      <div class="comment-view-wrapper">\n        <p class="comment">\n          <%- comment.comment %>\n        </p>\n        <div class="comment-actions">\n          <% if (currentUser && comment.authorId === currentUser.id){ %>\n            <a href="#" class="action-link edit">Edit</a>\n          <% } %>\n          <% if (currentUser && (currentUser.isAdmin || comment.authorId === currentUser.id)){ %>\n            <a href="#" class="action-link delete">Delete</a>\n          <% } %>\n        </div>\n      </div>\n      <div class="comment-form-wrapper hide">\n        <p class="error"></p>\n        <input type="hidden" class="comment-id" value="<%- comment.id %>">\n        <input type="text" class="comment-box" value="<%- comment.comment %>">\n        <div class="comment-actions">\n          <a href="#" class="action-link post">Save</a>\n          <a href="#" class="action-link cancel-edit">Cancel</a>\n        </div>\n      </div>\n    </div>\n  </div>\n</li>\n'},{}],64:[function(e,t,n){t.exports='<div class="side-comment <%= sectionClasses %>">\n  <a href="#" class="marker">\n    <span><%- comments.length %></span>\n  </a>\n\n  <div class="comments-wrapper">\n    <ul class="comments">\n      <% _.each(comments, function( comment ){ %>\n        <%= _.template(commentTemplate, { comment: comment, currentUser: currentUser, t: t, voting: voting }) %>\n      <% }) %>\n    </ul>\n\n    <% if (!currentUser) { %>\n      <span class="restricted">\n        <a href="/signin">Login</a>\n        Or\n        <a href="/signup?reference=<%= reference %>">Signup</a>\n      </span>\n    <% } %>\n\n    <% if (currentUser){ %>\n      <a href="#" class="add-comment">Leave a comment</a>\n      <div class="comment-form comment-form-wrapper">\n        <div class="author-avatar">\n          <img src="<%- currentUser.avatarUrl %>">\n        </div>\n        <div class="right-of-avatar">\n          <p class="author-name">\n            <%- currentUser.name %>\n          </p>\n          <p class="error"></p>\n          <input type="text" class="comment-box" placeholder="Leave a comment...">\n          <div class="actions">\n            <a href="#" class="action-link post">Post</a>\n            <a href="#" class="action-link cancel">Cancel</a>\n          </div>\n        </div>\n      </div>\n    <% } %>\n  </div>\n</div>\n'},{}]},{},[2])(2)});