!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).SideComments=e()}}(function(){return function e(t,n,r){function o(s,c){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!c&&a)return a(s,!0);if(i)return i(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){var n=t[s][1][e];return o(n||e)},u,u.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t,n){function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(f===setTimeout)return setTimeout(e,0);if((f===r||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function s(e){if(p===clearTimeout)return clearTimeout(e);if((p===o||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(e);try{return p(e)}catch(t){try{return p.call(null,e)}catch(t){return p.call(this,e)}}}function c(){v&&d&&(v=!1,d.length?m=d.concat(m):g=-1,m.length&&a())}function a(){if(!v){var e=i(c);v=!0;for(var t=m.length;t;){for(d=m,m=[];++g<t;)d&&d[g].run();g=-1,t=m.length}d=null,v=!1,s(e)}}function l(e,t){this.fun=e,this.array=t}function u(){}var f,p,h=t.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:r}catch(e){f=r}try{p="function"==typeof clearTimeout?clearTimeout:o}catch(e){p=o}}();var d,m=[],v=!1,g=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];m.push(new l(e,t)),1!==m.length||v||i(a)},l.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=u,h.addListener=u,h.once=u,h.off=u,h.removeListener=u,h.removeAllListeners=u,h.emit=u,h.prependListener=u,h.prependOnceListener=u,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],2:[function(e,t,n){t.exports=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e}},{}],3:[function(e,t,n){function r(e,t,n,r){this.$el=$(e),this.$body=$("body"),this.eventPipe=new s,this.currentUser=o.clone(t)||null,this.existingComments=o.cloneDeep(n)||[],this.sections=[],this.activeSection=null,(r=r||{}).locale=r.locale||"en",r.voting=r.voting||!1,r.reference=r.reference||"",this.options=r,this.eventPipe.on("showComments",o.bind(this.showComments,this)),this.eventPipe.on("hideComments",o.bind(this.hideComments,this)),this.eventPipe.on("sectionSelected",o.bind(this.sectionSelected,this)),this.eventPipe.on("sectionDeselected",o.bind(this.sectionDeselected,this)),this.eventPipe.on("commentPosted",o.bind(this.commentPosted,this)),this.eventPipe.on("commentUpdated",o.bind(this.commentUpdated,this)),this.eventPipe.on("commentDeleted",o.bind(this.commentDeleted,this)),this.eventPipe.on("commentUpvoted",o.bind(this.commentUpvoted,this)),this.eventPipe.on("commentDownvoted",o.bind(this.commentUpvoted,this)),this.eventPipe.on("addCommentAttempted",o.bind(this.addCommentAttempted,this)),this.$body.on("click",o.bind(this.bodyClick,this)),this.initialize(this.existingComments)}var o=e("./vendor/lodash-custom.js"),i=e("./section.js"),s=e("emitter");s(r.prototype),r.prototype.initialize=function(e){o.each(this.$el.find(".commentable-section"),function(e){var t=$(e),n=t.data("section-id").toString(),r=o.find(this.existingComments,{sectionId:n});this.sections.push(new i(this.eventPipe,t,this.currentUser,r,this.options))},this)},r.prototype.showComments=function(){this.$el.addClass("side-comments-open")},r.prototype.hideComments=function(){this.activeSection&&(this.activeSection.deselect(),this.activeSection=null),this.$el.removeClass("side-comments-open")},r.prototype.sectionSelected=function(e){this.showComments(),this.activeSection&&this.activeSection.deselect(),this.activeSection=e},r.prototype.sectionDeselected=function(e){this.hideComments(),this.activeSection=null},r.prototype.commentPosted=function(e){this.emit("commentPosted",e)},r.prototype.commentUpdated=function(e){this.emit("commentUpdated",e)},r.prototype.commentDeleted=function(e){this.emit("commentDeleted",e)},r.prototype.commentUpvoted=function(e){this.emit("commentUpvoted",e)},r.prototype.commentDownvoted=function(e){this.emit("commentDownvoted",e)},r.prototype.addCommentAttempted=function(){this.emit("addCommentAttempted")},r.prototype.insertComment=function(e){o.find(this.sections,{id:e.sectionId}).insertComment(e)},r.prototype.replaceComment=function(e){o.find(this.sections,{id:e.sectionId}).replaceComment(e)},r.prototype.removeComment=function(e,t){o.find(this.sections,{id:e}).removeComment(t)},r.prototype.deleteComment=function(e,t){o.find(this.sections,{id:e}).deleteComment(t)},r.prototype.commentsAreVisible=function(){return this.$el.hasClass("side-comments-open")},r.prototype.bodyClick=function(e){var t=$(e.target);t.closest(".side-comment").length<1&&t.closest("body").length>0&&(this.activeSection&&this.activeSection.deselect(),this.hideComments())},r.prototype.setCurrentUser=function(e){this.hideComments(),this.currentUser=e,o.each(this.sections,o.bind(function(e){e.currentUser=this.currentUser,e.render()},this))},r.prototype.removeCurrentUser=function(){this.setCurrentUser(null)},r.prototype.destroy=function(){this.hideComments(),this.$el.off()},t.exports=r},{"./section.js":4,"./vendor/lodash-custom.js":5,emitter:52}],4:[function(e,t,n){function r(e,t,n,r,o){this.eventPipe=e,this.$el=t,this.comments=r?r.comments:[],this.currentUser=n||null,this.clickEventName=a()?"touchstart":"click",this.locale=o.locale||o.trans.locale||"en",this.voting=o.voting||!1,this.reference=o.reference,this.id=t.data("section-id"),this.$el.on(this.clickEventName,".side-comment .marker",i.bind(this.markerClick,this)),this.$el.on(this.clickEventName,".side-comment .add-comment",i.bind(this.addCommentClick,this)),this.$el.on(this.clickEventName,".side-comment .post",i.bind(this.postCommentClick,this)),this.$el.on(this.clickEventName,".side-comment .cancel",i.bind(this.cancelCommentClick,this)),this.$el.on(this.clickEventName,".side-comment .edit",i.bind(this.showEditCommentForm,this)),this.$el.on(this.clickEventName,".side-comment .cancel-edit",i.bind(this.hideEditCommentForm,this)),this.$el.on(this.clickEventName,".side-comment .delete",i.bind(this.deleteCommentClick,this)),this.$el.on(this.clickEventName,".side-comment .upvote",i.bind(this.upvoteCommentClick,this)),this.$el.on(this.clickEventName,".side-comment .downvote",i.bind(this.downvoteCommentClick,this)),this.$el.on(this.clickEventName,".side-comment .read-more",i.bind(this.readmore,this)),this.render()}function o(e,t){var n,r=new Function("_","return _."+t);return e.some(function(e){return!!r(e)&&(n=e,!0)}),n||null}var i=e("./vendor/lodash-custom.js"),s=e("../templates/section.html"),c=e("../templates/comment.html"),a=e("./helpers/mobile-check.js"),l=(e("confirmation"),e("t")),u=e("trunkata"),f=e("classes"),p=e("closest"),h=e("dom");r.prototype.markerClick=function(e){e.preventDefault(),this.select()},r.prototype.addCommentClick=function(e){e.preventDefault(),this.currentUser?this.showCommentForm():this.eventPipe.emit("addCommentAttempted")},r.prototype.showCommentForm=function(){this.comments.length>0&&(this.$el.find(".add-comment").addClass("hide"),this.$el.find(".comment-form").addClass("active")),this.focusCommentBox()},r.prototype.hideCommentForm=function(){this.comments.length>0&&(this.$el.find(".add-comment").removeClass("hide"),this.$el.find(".comment-form").removeClass("active")),this.$el.find(".comment-box").empty()},r.prototype.showEditCommentForm=function(e){e.preventDefault();var t=$(e.target).closest("li");t.find(".comment-view-wrapper").addClass("hide"),t.find(".comment-form-wrapper").removeClass("hide")},r.prototype.hideEditCommentForm=function(e){e.preventDefault();var t=$(e.target).closest("li");t.find(".comment-view-wrapper").removeClass("hide"),t.find(".comment-form-wrapper").addClass("hide")},r.prototype.focusCommentBox=function(){setTimeout(i.bind(function(){this.$el.find(".comment-box").get(0).focus()},this),300)},r.prototype.cancelCommentClick=function(e){e.preventDefault(),this.cancelComment()},r.prototype.cancelComment=function(){this.comments.length>0?this.hideCommentForm():(this.deselect(),this.eventPipe.emit("hideComments"))},r.prototype.postCommentClick=function(e){e.preventDefault();var t=$(e.target).closest(".comment-form-wrapper");this.postComment(t)},r.prototype.postComment=function(e){var t=e.find(".comment-box"),n=t.val(),r=e.find(".comment-id").val();if(n.length>4096)return e.find(".error").html(l("Argument is limited to 4096 characters"));e.find(".error").html("");var o={id:r,sectionId:this.id,comment:n,authorAvatarUrl:this.currentUser.avatarUrl,authorName:this.currentUser.name,authorId:this.currentUser.id,authorUrl:this.currentUser.authorUrl||null};r?this.eventPipe.emit("commentUpdated",o):(t.val(""),this.eventPipe.emit("commentPosted",o))},r.prototype.insertComment=function(e){this.comments.push(e);var t=i.template(c,{comment:e,currentUser:this.currentUser,t:l,voting:this.voting});this.$el.find(".comments").append(t),this.$el.find(".side-comment").addClass("has-comments"),this.updateCommentCount(),this.hideCommentForm()},r.prototype.replaceComment=function(e){var t=i.template(c,{comment:e,currentUser:this.currentUser,t:l,voting:this.voting});this.$el.find("[data-comment-id="+e.id+"]").replaceWith(t)},r.prototype.updateCommentCount=function(){this.$el.find(".marker span").text(this.comments.length)},r.prototype.deleteCommentClick=function(e){e.preventDefault();var t=$(e.target).closest("li").data("comment-id");window.confirm("Are you sure you want to delete this comment?")&&this.deleteComment(t)},r.prototype.deleteComment=function(e){var t=i.find(this.comments,{id:e});t.sectionId=this.id,this.eventPipe.emit("commentDeleted",t)},r.prototype.upvoteCommentClick=function(e){e.preventDefault();var t=$(e.target).closest("li").data("comment-id");this.upvoteComment(t)},r.prototype.upvoteComment=function(e){var t=i.find(this.comments,{id:e});t.sectionId=this.id,this.eventPipe.emit("commentUpvoted",t)},r.prototype.downvoteCommentClick=function(e){e.preventDefault();var t=$(e.target).closest("li").data("comment-id");this.downvoteComment(t)},r.prototype.downvoteComment=function(e){var t=i.find(this.comments,{id:e});t.sectionId=this.id,this.eventPipe.emit("commentDownvoted",t)},r.prototype.removeComment=function(e){this.comments=i.reject(this.comments,{id:e}),this.$el.find('.side-comment .comments li[data-comment-id="'+e+'"]').remove(),this.updateCommentCount(),this.comments.length<1&&this.$el.find(".side-comment").removeClass("has-comments")},r.prototype.select=function(){this.isSelected()?(this.deselect(),this.eventPipe.emit("sectionDeselected",this)):(this.$el.find(".side-comment").addClass("active"),0===this.comments.length&&this.currentUser&&this.focusCommentBox(),this.$el.find("li[data-comment-id] p.comment").each(function(e,t){var n=t.innerHTML.length;if(u(t,{lines:4}),n>t.innerHTML.length){var r=document.createElement("a");f(r).add("action-link").add("read-more"),r.href="#",r.innerHTML=l("read more"),t.appendChild(r)}}),this.eventPipe.emit("sectionSelected",this))},r.prototype.readmore=function(e){e.preventDefault();var t=p(e.target,"li[data-comment-id]"),n=t.getAttribute("data-comment-id"),r=o(this.comments,'id === "%id"'.replace("%id",n));h("p.comment",t).html(r.text)},r.prototype.deselect=function(){this.$el.find(".side-comment").removeClass("active"),this.hideCommentForm()},r.prototype.isSelected=function(){return this.$el.find(".side-comment").hasClass("active")},r.prototype.sectionClasses=function(){var e="";return this.comments.length>0&&(e+=" has-comments"),this.currentUser||(e+=" no-current-user"),e},r.prototype.render=function(){this.$el.find(".side-comment").remove(),$(i.template(s,{commentTemplate:c,comments:this.comments,sectionClasses:this.sectionClasses(),currentUser:this.currentUser,t:l,voting:this.voting,reference:this.reference})).appendTo(this.$el)},r.prototype.destroy=function(){this.$el.off()},t.exports=r},{"../templates/comment.html":69,"../templates/section.html":70,"./helpers/mobile-check.js":2,"./vendor/lodash-custom.js":5,classes:6,closest:8,confirmation:54,dom:11,t:65,trunkata:66}],5:[function(e,t,n){(function(e){(function(){function r(e){return"\\"+ae[e]}function o(){return N.pop()||[]}function i(e){return"function"!=typeof e.toString&&"string"==typeof(e+"")}function s(e){e.length=0,N.length<U&&N.push(e)}function c(e,t,n){t||(t=0),void 0===n&&(n=e?e.length:0);for(var r=-1,o=n-t||0,i=Array(o<0?0:o);++r<o;)i[r]=e[t+r];return i}function a(){}function l(e){function t(){if(r){var e=c(r);Ce.apply(e,arguments)}if(this instanceof t){var i=f(n.prototype),s=n.apply(i,e||arguments);return x(s)?s:i}return n.apply(o,e||arguments)}var n=e[0],r=e[2],o=e[4];return Ne(t,e),t}function u(e,t,n,r,a){if(n){var l=n(e);if(void 0!==l)return l}if(!x(e))return e;var f=ye.call(e);if(!oe[f]||!$e.nodeClass&&i(e))return e;var p=Oe[f];switch(f){case X:case G:return new p(+e);case ee:case re:return new p(e);case ne:return l=p(e.source,H.exec(e)),l.lastIndex=e.lastIndex,l}var h=Le(e);if(t){var d=!r;r||(r=o()),a||(a=o());for(var m=r.length;m--;)if(r[m]==e)return a[m];l=h?p(e.length):{}}else l=h?c(e):Re({},e);return h&&(xe.call(e,"index")&&(l.index=e.index),xe.call(e,"input")&&(l.input=e.input)),t?(r.push(e),a.push(l),(h?qe:Ve)(e,function(e,o){l[o]=u(e,t,n,r,a)}),d&&(s(r),s(a)),l):l}function f(e,t){return x(e)?je(e):{}}function p(e,t,n){if("function"!=typeof e)return O;if(void 0===t||!("prototype"in e))return e;var r=e.__bindData__;if(void 0===r&&($e.funcNames&&(r=!e.name),!(r=r||!$e.funcDecomp))){var o=we.call(e);$e.funcNames||(r=!I.test(o)),r||(r=W.test(o),Ne(e,r))}if(!1===r||!0!==r&&1&r[1])return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)};case 4:return function(n,r,o,i){return e.call(t,n,r,o,i)}}return A(e,t)}function h(e){function t(){var e=l?s:this;if(o){var v=c(o);Ce.apply(v,arguments)}if((i||p)&&(v||(v=c(arguments)),i&&Ce.apply(v,i),p&&v.length<a))return r|=16,h([n,d?r:-4&r,v,null,s,a]);if(v||(v=arguments),u&&(n=e[m]),this instanceof t){e=f(n.prototype);var g=n.apply(e,v);return x(g)?g:e}return n.apply(e,v)}var n=e[0],r=e[1],o=e[2],i=e[3],s=e[4],a=e[5],l=1&r,u=2&r,p=4&r,d=8&r,m=n;return Ne(t,e),t}function d(e,t,n,r,c,a){if(n){var l=n(e,t);if(void 0!==l)return!!l}if(e===t)return 0!==e||1/e==1/t;var u=typeof e,f=typeof t;if(!(e!==e||e&&ce[u]||t&&ce[f]))return!1;if(null==e||null==t)return e===t;var p=ye.call(e),h=ye.call(t);if(p==K&&(p=te),h==K&&(h=te),p!=h)return!1;switch(p){case X:case G:return+e==+t;case ee:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case ne:case re:return e==String(t)}var m=p==J;if(!m){var v=xe.call(e,"__wrapped__"),g=xe.call(t,"__wrapped__");if(v||g)return d(v?e.__wrapped__:e,g?t.__wrapped__:t,n,r,c,a);if(p!=te||!$e.nodeClass&&(i(e)||i(t)))return!1;var y=!$e.argsObject&&b(e)?Object:e.constructor,x=!$e.argsObject&&b(t)?Object:t.constructor;if(y!=x&&!(w(y)&&y instanceof y&&w(x)&&x instanceof x)&&"constructor"in e&&"constructor"in t)return!1}var C=!c;c||(c=o()),a||(a=o());for(var k=c.length;k--;)if(c[k]==e)return a[k]==t;var _=0;if(l=!0,c.push(e),a.push(t),m){if(k=e.length,_=t.length,(l=_==k)||r)for(;_--;){var E=k,j=t[_];if(r)for(;E--&&!(l=d(e[E],j,n,r,c,a)););else if(!(l=d(e[_],j,n,r,c,a)))break}}else Be(t,function(t,o,i){if(xe.call(i,o))return _++,l=xe.call(e,o)&&d(e[o],t,n,r,c,a)}),l&&!r&&Be(e,function(e,t,n){if(xe.call(n,t))return l=--_>-1});return c.pop(),a.pop(),C&&(s(c),s(a)),l}function m(e,t,n,r,o,i){var s=1&t,a=4&t,u=16&t,f=32&t;if(!(2&t)&&!w(e))throw new TypeError;u&&!n.length&&(t&=-17,u=n=!1),f&&!r.length&&(t&=-33,f=r=!1);var p=e&&e.__bindData__;return p&&!0!==p?((p=c(p))[2]&&(p[2]=c(p[2])),p[3]&&(p[3]=c(p[3])),!s||1&p[1]||(p[4]=o),!s&&1&p[1]&&(t|=8),!a||4&p[1]||(p[5]=i),u&&Ce.apply(p[2]||(p[2]=[]),n),f&&_e.apply(p[3]||(p[3]=[]),r),p[1]|=t,m.apply(null,p)):(1==t||17===t?l:h)([e,t,n,r,o,i])}function v(){se.shadowedProps=V,se.array=se.bottom=se.loop=se.top="",se.init="iterable",se.useHas=!0;for(var e,t=0;e=arguments[t];t++)for(var n in e)se[n]=e[n];var r=se.args;return se.firstArg=/^[^,]+/.exec(r)[0],Function("baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+r+") {\n"+Pe(se)+"\n}")(p,Q,me,xe,L,b,Le,C,se.keys,ve,ce,Te,re,ge,ye)}function g(e){return He[e]}function y(e){return"function"==typeof e&&be.test(e)}function b(e){return e&&"object"==typeof e&&"number"==typeof e.length&&ye.call(e)==K||!1}function w(e){return"function"==typeof e}function x(e){return!(!e||!ce[typeof e])}function C(e){return"string"==typeof e||e&&"object"==typeof e&&ye.call(e)==re||!1}function _(e){for(var t=-1,n=De(e),r=n.length,o=Array(r);++t<r;)o[t]=e[n[t]];return o}function E(e,t,n){var r=[];if(t=a.createCallback(t,n,3),Le(e))for(var o=-1,i=e.length;++o<i;){var s=e[o];t(s,o,e)&&r.push(s)}else qe(e,function(e,n,o){t(e,n,o)&&r.push(e)});return r}function j(e,t,n){if(t=a.createCallback(t,n,3),!Le(e)){var r;return qe(e,function(e,n,o){if(t(e,n,o))return r=e,!1}),r}for(var o=-1,i=e.length;++o<i;){var s=e[o];if(t(s,o,e))return s}}function S(e,t,n){if(t&&void 0===n&&Le(e))for(var r=-1,o=e.length;++r<o&&!1!==t(e[r],r,e););else qe(e,t,n);return e}function A(e,t){return arguments.length>2?m(e,17,c(arguments,2),null,t):m(e,1,null,null,t)}function O(e){return e}function T(){}function $(e){return function(t){return t[e]}}var P,N=[],L={},U=40,D=/\b__p \+= '';/g,M=/\b(__p \+=) '' \+/g,F=/(__e\(.*?\)|\b__t\)) \+\n'';/g,z=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,H=/\w*$/,I=/^\s*function[ \n\r\t]+\w/,q=/<%=([\s\S]+?)%>/g,R=/($^)/,W=/\bthis\b/,B=/['\n\r\t\u2028\u2029\\]/g,V=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Z=0,K="[object Arguments]",J="[object Array]",X="[object Boolean]",G="[object Date]",Q="[object Error]",Y="[object Function]",ee="[object Number]",te="[object Object]",ne="[object RegExp]",re="[object String]",oe={};oe[Y]=!1,oe[K]=oe[J]=oe[X]=oe[G]=oe[ee]=oe[te]=oe[ne]=oe[re]=!0;var ie={configurable:!1,enumerable:!1,value:null,writable:!1},se={args:"",array:null,bottom:"",firstArg:"",init:"",keys:null,loop:"",shadowedProps:null,support:null,top:"",useHas:!1},ce={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1},ae={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"},le=ce[typeof window]&&window||this,ue=ce[typeof n]&&n&&!n.nodeType&&n,fe=ce[typeof t]&&t&&!t.nodeType&&t,pe=fe&&fe.exports===ue&&ue,he=ce[typeof e]&&e;!he||he.global!==he&&he.window!==he||(le=he);var de=[],me=Error.prototype,ve=Object.prototype,ge=String.prototype,ye=ve.toString,be=RegExp("^"+String(ye).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),we=Function.prototype.toString,xe=ve.hasOwnProperty,Ce=de.push,ke=ve.propertyIsEnumerable,_e=de.unshift,Ee=function(){try{var e={},t=y(t=Object.defineProperty)&&t,n=t(e,e,e)&&t}catch(e){}return n}(),je=y(je=Object.create)&&je,Se=y(Se=Array.isArray)&&Se,Ae=y(Ae=Object.keys)&&Ae,Oe={};Oe[J]=Array,Oe[X]=Boolean,Oe[G]=Date,Oe[Y]=Function,Oe[te]=Object,Oe[ee]=Number,Oe[ne]=RegExp,Oe[re]=String;var Te={};Te[J]=Te[G]=Te[ee]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},Te[X]=Te[re]={constructor:!0,toString:!0,valueOf:!0},Te[Q]=Te[Y]=Te[ne]={constructor:!0,toString:!0},Te[te]={constructor:!0},function(){for(var e=V.length;e--;){var t=V[e];for(var n in Te)xe.call(Te,n)&&!xe.call(Te[n],t)&&(Te[n][t]=!1)}}();var $e=a.support={};!function(){var e=function(){this.x=1},t={0:1,length:1},n=[];e.prototype={valueOf:1,y:1};for(var r in new e)n.push(r);for(r in arguments);$e.argsClass=ye.call(arguments)==K,$e.argsObject=arguments.constructor==Object&&!(arguments instanceof Array),$e.enumErrorProps=ke.call(me,"message")||ke.call(me,"name"),$e.enumPrototypes=ke.call(e,"prototype"),$e.funcDecomp=!y(le.WinRTError)&&W.test(function(){return this}),$e.funcNames="string"==typeof Function.name,$e.nonEnumArgs=0!=r,$e.nonEnumShadows=!/valueOf/.test(n),$e.spliceObjects=(de.splice.call(t,0,1),!t[0]),$e.unindexedChars="x"[0]+Object("x")[0]!="xx";try{$e.nodeClass=!(ye.call(document)==te&&!({toString:0}+""))}catch(e){$e.nodeClass=!0}}(1),a.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:q,variable:"",imports:{_:a}};var Pe=function(e){var t="var index, iterable = "+e.firstArg+", result = "+e.init+";\nif (!iterable) return result;\n"+e.top+";";e.array?(t+="\nvar length = iterable.length; index = -1;\nif ("+e.array+") {  ",$e.unindexedChars&&(t+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),t+="\n  while (++index < length) {\n    "+e.loop+";\n  }\n}\nelse {  "):$e.nonEnumArgs&&(t+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+e.loop+";\n    }\n  } else {  "),$e.enumPrototypes&&(t+="\n  var skipProto = typeof iterable == 'function';\n  "),$e.enumErrorProps&&(t+="\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  ");var n=[];if($e.enumPrototypes&&n.push('!(skipProto && index == "prototype")'),$e.enumErrorProps&&n.push('!(skipErrorProps && (index == "message" || index == "name"))'),e.useHas&&e.keys)t+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n",n.length&&(t+="    if ("+n.join(" && ")+") {\n  "),t+=e.loop+";    ",n.length&&(t+="\n    }"),t+="\n  }  ";else if(t+="\n  for (index in iterable) {\n",e.useHas&&n.push("hasOwnProperty.call(iterable, index)"),n.length&&(t+="    if ("+n.join(" && ")+") {\n  "),t+=e.loop+";    ",n.length&&(t+="\n    }"),t+="\n  }    ",$e.nonEnumShadows){for(t+="\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      ",k=0;k<7;k++)t+="\n    index = '"+e.shadowedProps[k]+"';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))",e.useHas||(t+=" || (!nonEnum[index] && iterable[index] !== objectProto[index])"),t+=") {\n      "+e.loop+";\n    }      ";t+="\n  }    "}return(e.array||$e.nonEnumArgs)&&(t+="\n}"),t+=e.bottom+";\nreturn result"};je||(f=function(){function e(){}return function(t){if(x(t)){e.prototype=t;var n=new e;e.prototype=null}return n||le.Object()}}());var Ne=Ee?function(e,t){ie.value=t,Ee(e,"__bindData__",ie)}:T;$e.argsClass||(b=function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&xe.call(e,"callee")&&!ke.call(e,"callee")||!1});var Le=Se||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&ye.call(e)==J||!1},Ue=v({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"}),De=Ae?function(e){return x(e)?$e.enumPrototypes&&"function"==typeof e||$e.nonEnumArgs&&e.length&&b(e)?Ue(e):Ae(e):[]}:Ue,Me={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3)",array:"typeof length == 'number'",keys:De,loop:"if (callback(iterable[index], index, collection) === false) return result"},Fe={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",keys:De,loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"},ze={top:"if (!objectTypes[typeof iterable]) return result;\n"+Me.top,array:!1},He={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ie=RegExp("["+De(He).join("")+"]","g"),qe=v(Me),Re=v(Fe,{top:Fe.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"}),We=v(Fe),Be=v(Me,ze,{useHas:!1}),Ve=v(Me,ze);w(/x/)&&(w=function(e){return"function"==typeof e&&ye.call(e)==Y}),a.assign=Re,a.bind=A,a.createCallback=function(e,t,n){var r=typeof e;if(null==e||"function"==r)return p(e,t,n);if("object"!=r)return $(e);var o=De(e),i=o[0],s=e[i];return 1!=o.length||s!==s||x(s)?function(t){for(var n=o.length,r=!1;n--&&(r=d(t[o[n]],e[o[n]],null,!0)););return r}:function(e){var t=e[i];return s===t&&(0!==s||1/s==1/t)}},a.defaults=We,a.filter=E,a.forEach=S,a.forIn=Be,a.forOwn=Ve,a.keys=De,a.property=$,a.reject=function(e,t,n){return t=a.createCallback(t,n,3),E(e,function(e,n,r){return!t(e,n,r)})},a.values=_,a.each=S,a.extend=Re,a.select=E,a.clone=function(e,t,n,r){return"boolean"!=typeof t&&null!=t&&(r=n,n=t,t=!1),u(e,t,"function"==typeof n&&p(n,r,1))},a.cloneDeep=function(e,t,n){return u(e,!0,"function"==typeof t&&p(t,n,1))},a.escape=function(e){return null==e?"":String(e).replace(Ie,g)},a.find=j,a.identity=O,a.isArguments=b,a.isArray=Le,a.isFunction=w,a.isObject=x,a.isString=C,a.noop=T,a.template=function(e,t,n){var o=a.templateSettings;e=String(e||""),n=We({},n,o);var i,s=We({},n.imports,o.imports),c=De(s),l=_(s),u=0,f=n.interpolate||R,p="__p += '",h=RegExp((n.escape||R).source+"|"+f.source+"|"+(f===q?z:R).source+"|"+(n.evaluate||R).source+"|$","g");e.replace(h,function(t,n,o,s,c,a){return o||(o=s),p+=e.slice(u,a).replace(B,r),n&&(p+="' +\n__e("+n+") +\n'"),c&&(i=!0,p+="';\n"+c+";\n__p += '"),o&&(p+="' +\n((__t = ("+o+")) == null ? '' : __t) +\n'"),u=a+t.length,t}),p+="';\n";var d=n.variable,m=d;m||(p="with ("+(d="obj")+") {\n"+p+"\n}\n"),p=(i?p.replace(D,""):p).replace(M,"$1").replace(F,"$1;"),p="function("+d+") {\n"+(m?"":d+" || ("+d+" = {});\n")+"var __t, __p = '', __e = _.escape"+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var v="\n/*\n//# sourceURL="+(n.sourceURL||"/lodash/template/source["+Z+++"]")+"\n*/";try{var g=Function(c,"return "+p+v).apply(P,l)}catch(e){throw e.source=p,e}return t?g(t):(g.source=p,g)},a.detect=j,a.findWhere=j,a.VERSION="2.4.1",ue&&fe&&(pe?(fe.exports=a)._=a:ue._=a)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(e,t,n){function r(e){if(!e)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}var o=e("indexof"),i=/\s+/,s=Object.prototype.toString;t.exports=function(e){return new r(e)},r.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array();return~o(t,e)||t.push(e),this.el.className=t.join(" "),this},r.prototype.remove=function(e){if("[object RegExp]"==s.call(e))return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),n=o(t,e);return~n&&t.splice(n,1),this.el.className=t.join(" "),this},r.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},r.prototype.toggle=function(e,t){return this.list?(void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this):(void 0!==t?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this)},r.prototype.array=function(){var e=this.el.className.replace(/^\s+|\s+$/g,"").split(i);return""===e[0]&&e.shift(),e},r.prototype.has=r.prototype.contains=function(e){return this.list?this.list.contains(e):!!~o(this.array(),e)}},{indexof:7}],7:[function(e,t,n){t.exports=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},{}],8:[function(e,t,n){var r=e("matches-selector");t.exports=function(e,t,n,o){for(e=n?{parentNode:e}:e,o=o||document;(e=e.parentNode)&&e!==document;){if(r(e,t))return e;if(e===o)return}}},{"matches-selector":9}],9:[function(e,t,n){try{r=e("query")}catch(t){var r=e("component-query")}var o=Element.prototype,i=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector;t.exports=function(e,t){if(!e||1!==e.nodeType)return!1;if(i)return i.call(e,t);for(var n=r.all(t,e.parentNode),o=0;o<n.length;++o)if(n[o]==e)return!0;return!1}},{"component-query":10,query:10}],10:[function(e,t,n){function r(e,t){return t.querySelector(e)}(n=t.exports=function(e,t){return t=t||document,r(e,t)}).all=function(e,t){return(t=t||document).querySelectorAll(e)},n.engine=function(e){if(!e.one)throw new Error(".one callback required");if(!e.all)throw new Error(".all callback required");return r=e.one,n.all=e.all,n}},{}],11:[function(e,t,n){function r(e,t){if(p(e))return new o(e);if(e instanceof o)return e;if(e.nodeName)return new o([e]);if("string"!=typeof e)throw new TypeError("invalid selector");var n=u.left(e);if(i(n))return new o([s(n)],n);var r=t?t instanceof o?t[0]:t:document;return new o(l.all(e,r),e)}function o(e,t){e=e||[];for(var n=this.length=e.length,r=0;r<n;r++)this[r]=e[r];this.selector=t}function i(e){if("<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3)return!0;var t=d.exec(e);return!(!t||!t[1])}var s=e("domify"),c=e("each"),a=(e("event"),e("keys")),l=e("query"),u=e("trim"),f=[].slice,p=Array.isArray||function(e){return!!e&&"[object Array]"===Object.prototype.toString.call(e)},h=["id","src","rel","cols","rows","type","name","href","title","style","width","height","action","method","tabindex","placeholder"],d=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/;t.exports=r,r.List=o,r.attrs=h,r.use=function(e,t){var n,r=[];2==arguments.length?(r.push(e),(n={})[e]=t,t=n):e.name?(t=e,e=e.name,r.push(e),(n={})[e]=t,t=n):(r=a(e),t=e);for(var i=0,s=r.length;i<s;i++)o.prototype[r[i]]=t[r[i]];return this},o.prototype.dom=r,o.prototype.length=0,o.prototype.splice=Array.prototype.splice,o.prototype.toArray=function(){return f.call(this)},c(h,function(e){o.prototype[e]=function(t){return 0==arguments.length?this.attr(e):this.attr(e,t)}}),r.use(e("./lib/attributes")),r.use(e("./lib/classes")),r.use(e("./lib/events")),r.use(e("./lib/manipulate")),r.use(e("./lib/traverse"))},{"./lib/attributes":12,"./lib/classes":13,"./lib/events":14,"./lib/manipulate":15,"./lib/traverse":16,domify:43,each:37,event:39,keys:45,query:40,trim:50}],12:[function(e,t,n){var r=e("value");n.attr=function(e,t){return 1==arguments.length?this[0]&&this[0].getAttribute(e):null==t?this.removeAttr(e):this.forEach(function(n){n.setAttribute(e,t)})},n.removeAttr=function(e){return this.forEach(function(t){t.removeAttribute(e)})},n.prop=function(e,t){return 1==arguments.length?this[0]&&this[0][e]:this.forEach(function(n){n[e]=t})},n.val=n.value=function(e){return 0==arguments.length?this[0]?r(this[0]):void 0:this.forEach(function(t){r(t,e)})}},{value:41}],13:[function(e,t,n){var r=e("classes");n.addClass=function(e){return this.forEach(function(t){t._classes=t._classes||r(t),t._classes.add(e)})},n.removeClass=function(e){return this.forEach(function(t){t._classes=t._classes||r(t),t._classes.remove(e)})},n.toggleClass=function(e,t){var n="toggle";return 2==arguments.length&&(n=t?"add":"remove"),this.forEach(function(t){t._classes=t._classes||r(t),t._classes[n](e)})},n.hasClass=function(e){for(var t,n=0,o=this.length;n<o;n++)if(t=this[n],t._classes=t._classes||r(t),t._classes.has(e))return!0;return!1}},{classes:17}],14:[function(e,t,n){var r=e("event"),o=e("delegate");n.on=function(e,t,n,i){return"string"==typeof t?this.forEach(function(r){n._delegate=o.bind(r,t,e,n,i)}):(i=n,n=t,this.forEach(function(t){r.bind(t,e,n,i)}))},n.off=function(e,t,n,i){return"string"==typeof t?this.forEach(function(t){o.unbind(t,e,n._delegate,i)}):(i=n,n=t,this.forEach(function(t){r.unbind(t,e,n,i)}))}},{delegate:36,event:39}],15:[function(e,t,n){function r(e){var t,n="";switch(e.nodeType){case 1:case 9:n=s(e);break;case 11:n=e.textContent||e.innerText;break;case 3:case 4:return e.nodeValue;default:for(;t=e[i++];)n+=r(t)}return n}e("value");var o=e("css"),s=e("text");n.text=function(e){if(1==arguments.length)return this.forEach(function(t){if(11==t.nodeType){for(var n;n=t.firstChild;)t.removeChild(n);t.appendChild(document.createTextNode(e))}else s(t,e)});var t="";return this.forEach(function(e){11==e.nodeType?t+=r(e.firstChild):t+=s(e)}),t},n.html=function(e){return 1==arguments.length?this.forEach(function(t){t.innerHTML=e}):this[0]&&this[0].innerHTML},n.css=function(e,t){return t||"object"==typeof e?(this.forEach(function(n){o(n,e,t)}),this):o(this[0],e)},n.prepend=function(e){var t=this.dom;return this.forEach(function(n,r){t(e).forEach(function(e){e=r?e.cloneNode(!0):e,n.children.length?n.insertBefore(e,n.firstChild):n.appendChild(e)})}),this},n.append=function(e){var t=this.dom;return this.forEach(function(n,r){t(e).forEach(function(e){e=r?e.cloneNode(!0):e,n.appendChild(e)})}),this},n.insertAfter=function(e){var t=this.dom;return this.forEach(function(n){t(e).forEach(function(e,t){e.parentNode&&(n=t?n.cloneNode(!0):n,e.parentNode.insertBefore(n,e.nextSibling))})}),this},n.appendTo=function(e){return this.dom(e).append(this),this},n.replace=function(e){var t=this;return this.dom(e).forEach(function(e,n){var r=t[n],o=r.parentNode;o&&(e=n?e.cloneNode(!0):e,o.replaceChild(e,r))}),this},n.empty=function(){return this.forEach(function(e){s(e,"")})},n.remove=function(){return this.forEach(function(e){var t=e.parentNode;t&&t.removeChild(e)})},n.clone=function(){var e=this.map(function(e){return e.cloneNode(!0)});return this.dom(e)},n.focus=function(){return this[0].focus(),this}},{css:19,text:47,value:41}],16:[function(e,t,n){var r=Array.prototype,o=e("each"),i=e("traverse"),s=e("to-function"),c=e("matches-selector");n.find=function(e){return this.dom(e,this)},n.is=function(e){for(var t,n=0;t=this[n];n++)if(c(t,e))return!0;return!1},n.parent=function(e,t){return this.dom(i("parentNode",this[0],e,t||1))},n.next=function(e,t){return this.dom(i("nextSibling",this[0],e,t||1))},n.prev=n.previous=function(e,t){return this.dom(i("previousSibling",this[0],e,t||1))},n.each=function(e){for(var t,n=this.dom,r=0,o=this.length;r<o;r++)t=n(this[r]),e.call(t,t,r);return this},n.forEach=function(e){for(var t=0,n=this.length;t<n;t++)e.call(this[t],this[t],t);return this},n.map=function(e){e=s(e);for(var t=this.dom,n=[],r=0,o=this.length;r<o;r++)n.push(e.call(t(this[r]),this[r],r));return this.dom(n)},n.filter=n.select=function(e){e=s(e);for(var t=this.dom,n=[],r=0,o=this.length;r<o;r++)e.call(t(this[r]),this[r],r)&&n.push(this[r]);return this.dom(n)},n.reject=function(e){var t,n=this.dom,r=[],o=this.length;if("string"==typeof e&&(e=s(e)),e)for(t=0;t<o;t++)e.call(n(this[t]),this[t],t)||r.push(this[t]);else for(t=0;t<o;t++)this[t]!=e&&r.push(this[t]);return this.dom(r)},n.at=function(e){return this.dom(this[e])},n.first=function(){return this.dom(this[0])},n.last=function(){return this.dom(this[this.length-1])},o(["push","pop","shift","splice","unshift","reverse","sort","toString","concat","join","slice"],function(e){n[e]=function(){return r[e].apply(this.toArray(),arguments)}})},{each:37,"matches-selector":44,"to-function":48,traverse:51}],17:[function(e,t,n){function r(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}var o=e("indexof"),i=/\s+/,s=Object.prototype.toString;t.exports=function(e){return new r(e)},r.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array();return~o(t,e)||t.push(e),this.el.className=t.join(" "),this},r.prototype.remove=function(e){if("[object RegExp]"==s.call(e))return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),n=o(t,e);return~n&&t.splice(n,1),this.el.className=t.join(" "),this},r.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},r.prototype.toggle=function(e,t){return this.list?(void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this):(void 0!==t?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this)},r.prototype.array=function(){var e=this.el.className.replace(/^\s+|\s+$/g,"").split(i);return""===e[0]&&e.shift(),e},r.prototype.has=r.prototype.contains=function(e){return this.list?this.list.contains(e):!!~o(this.array(),e)}},{indexof:18}],18:[function(e,t,n){arguments[4][7][0].apply(n,arguments)},{dup:7}],19:[function(e,t,n){function r(e,t){for(var n in t)i(e,n,t[n]);return e}var o=e("debug")("css"),i=e("./lib/style"),s=e("./lib/css");t.exports=function(e,t,n){if(e){if(void 0!==n){var i={};return i[t]=n,o("setting styles %j",i),r(e,i)}return"object"==typeof t?(o("setting styles %j",t),r(e,t)):(o("getting %s",t),s(e,t))}}},{"./lib/css":21,"./lib/style":24,debug:30}],20:[function(e,t,n){var r=e("debug")("css:computed"),o=e("within-document"),i=e("./styles");t.exports=function(t,n,s){var c,a=s||i(t);if(a)return""!==(c=a.getPropertyValue?a.getPropertyValue(n)||a[n]:a[n])||o(t)||(r("element not within document, try finding from style attribute"),c=e("./style")(t,n)),r("computed value of %s: %s",n,c),void 0===c?c:c+""}},{"./style":24,"./styles":25,debug:30,"within-document":35}],21:[function(e,t,n){function r(e){return!isNan(parseFloat(e))&&isFinite(e)}var o=e("debug")("css:css"),i=e("to-camel-case"),s=e("./computed"),c=e("./prop");t.exports=function(t,n,l,u){var f,p=e("./hooks"),h=i(n),d=t.style,m=p[n=c(n,d)]||p[h];if(m&&m.get&&(o("get hook provided. use that"),f=m.get(t,!0,l)),void 0==f&&(o("fetch the computed value of %s",n),f=s(t,n)),"normal"==f&&a[n]&&(f=a[n],o("normal => %s",f)),""==l||l){o("converting value: %s into a number",f);var v=parseFloat(f);return!0===l||r(v)?v||0:f}return f};var a={letterSpacing:0,fontWeight:400}},{"./computed":20,"./hooks":22,"./prop":23,debug:30,"to-camel-case":32}],22:[function(e,t,n){function r(e,t,n){var r=f.exec(t);return r?Math.max(0,r[1])+(r[2]||"px"):t}function o(e,t,n){var r=!0,o="width"===t?e.offsetWidth:e.offsetHeight,s=m(e),a=h.boxSizing&&"border-box"===c(e,"boxSizing");if(o<=0||null==o){if(((o=m(e,t,s))<0||null==o)&&(o=e.style[t]),u.test(o))return o;r=a&&(h.boxSizingReliable()||o===e.style[t]),o=parseFloat(o)||0}return n=n||(a?"border":"content"),(o+=i(e,t,n,r,s))+"px"}function i(e,t,n,r,o){for(var i=n===(r?"border":"content")?4:"width"==t?1:0,s=0;i<4;i+=2)"margin"===n&&(s+=c(e,n+v[i],!0,o)),r?("content"===n&&(s-=c(e,"padding"+v[i],!0,o)),"margin"!==n&&(s-=c(e,"border"+v[i]+"Width",!0,o))):(s+=c(e,"padding"+v[i],!0,o),"padding"!==n&&(s+=c(e,"border"+v[i]+"Width",!0,o)));return s}var s=e("each"),c=e("./css"),a={position:"absolute",visibility:"hidden",display:"block"},l=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,u=new RegExp("^("+l+")(?!px)[a-z%]+$","i"),f=new RegExp("^("+l+")(.*)$","i"),p=/^(none|table(?!-c[ea]).+)/,h=(e("./styles"),e("./support")),d=e("./swap"),m=e("./computed"),v=["Top","Right","Bottom","Left"];s(["width","height"],function(e){n[e]={},n[e].get=function(t,n,r){if(n)return 0==t.offsetWidth&&p.test(c(t,"display"))?d(t,a,function(){return o(t,e,r)}):o(t,e,r)},n[e].set=function(t,n,o){var s=o&&s(t);return r(0,n,o&&i(t,e,o,"border-box"==c(t,"boxSizing",!1,s),s))}}),n.opacity={},n.opacity.get=function(e,t){if(t){var n=m(e,"opacity");return""==n?"1":n}}},{"./computed":20,"./css":21,"./styles":25,"./support":26,"./swap":27,each:37}],23:[function(e,t,n){var r=e("debug")("css:prop"),o=(e("to-camel-case"),e("./vendor"));t.exports=function(e,t){return e=i[e]||(i[e]=o(e,t)),r("transform property: %s => %s",e,t),e};var i={float:"cssFloat"in document.documentElement.style?"cssFloat":"styleFloat"}},{"./vendor":28,debug:30,"to-camel-case":32}],24:[function(e,t,n){function r(e,t,n,r){var i,s=e.style,c=a[t]||a[n];return c&&c.get&&void 0!==(i=c.get(e,!1,r))?(o("get hook defined, returning: %s",i),i):(i=s[t],o("getting %s",i),i)}var o=e("debug")("css:style"),i=e("to-camel-case"),s=e("./support"),c=e("./prop"),a=e("./hooks");t.exports=function(e,t,n,u){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var f=i(t),p=e.style,h=typeof n;if(!n)return r(e,t,f,u);t=c(t,p);var d=a[t]||a[f];"number"!=h||l[f]||(o('adding "px" to end of number'),n+="px"),s.clearCloneStyle||""!==n||0!==t.indexOf("background")||(o('set property (%s) value to "inherit"',t),p[t]="inherit"),d&&d.set&&void 0===(n=d.set(e,n,u))||(o("set hook defined. setting property (%s) to %s",t,n),p[t]="",p[t]=n)}};var l={columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0}},{"./hooks":22,"./prop":23,"./support":26,debug:30,"to-camel-case":32}],25:[function(e,t,n){t.exports=function(e){return window.getComputedStyle?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle}},{}],26:[function(e,t,n){function r(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",s.appendChild(c);var e=window.getComputedStyle(a,null);i="1%"!==e.top,o="4px"===e.width,s.removeChild(c)}var o,i,s=document.documentElement,c=document.createElement("div"),a=document.createElement("div");a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",n.clearCloneStyle="content-box"===a.style.backgroundClip,c.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",c.appendChild(a),n.pixelPosition=function(){return void 0==i&&r(),i},n.boxSizingReliable=function(){return void 0==o&&r(),o},n.reliableMarginRight=function(){var e,t=a.appendChild(document.createElement("div"));return t.style.cssText=a.style.cssText=divReset,t.style.marginRight=t.style.width="0",a.style.width="1px",s.appendChild(c),e=!parseFloat(window.getComputedStyle(t,null).marginRight),s.removeChild(c),a.innerHTML="",e}},{}],27:[function(e,t,n){t.exports=function(e,t,n,r){for(var o in t)old[o]=e.style[o],e.style[o]=t[o];ret=n.apply(e,r||[]);for(o in t)e.style[o]=old[o];return ret}},{}],28:[function(e,t,n){var r=["Webkit","O","Moz","ms"];t.exports=function(e,t){if(t[e])return e;for(var n=e[0].toUpperCase()+e.slice(1),o=e,i=r.length;i--;)if((e=r[i]+n)in t)return e;return o}},{}],29:[function(e,t,n){function r(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*f;case"days":case"day":case"d":return n*u;case"hours":case"hour":case"hrs":case"hr":case"h":return n*l;case"minutes":case"minute":case"mins":case"min":case"m":return n*a;case"seconds":case"second":case"secs":case"sec":case"s":return n*c;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function o(e){return e>=u?Math.round(e/u)+"d":e>=l?Math.round(e/l)+"h":e>=a?Math.round(e/a)+"m":e>=c?Math.round(e/c)+"s":e+"ms"}function i(e){return s(e,u,"day")||s(e,l,"hour")||s(e,a,"minute")||s(e,c,"second")||e+" ms"}function s(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var c=1e3,a=60*c,l=60*a,u=24*l,f=365.25*u;t.exports=function(e,t){t=t||{};var n=typeof e;if("string"===n&&e.length>0)return r(e);if("number"===n&&!1===isNaN(e))return t.long?i(e):o(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],30:[function(e,t,n){(function(r){function o(){var e;try{e=n.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}(n=t.exports=e("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},n.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),t){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var o=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,r)}},n.save=function(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(e){}},n.load=o,n.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},n.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},n.enable(o())}).call(this,e("_process"))},{"./debug":31,_process:1}],31:[function(e,t,n){function r(e){var t,r=0;for(t in e)r=(r<<5)-r+e.charCodeAt(t),r|=0;return n.colors[Math.abs(r)%n.colors.length]}function o(e){function t(){if(t.enabled){var e=t,r=+new Date,o=r-(i||r);e.diff=o,e.prev=i,e.curr=r,i=r;for(var s=new Array(arguments.length),c=0;c<s.length;c++)s[c]=arguments[c];s[0]=n.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var a=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(t,r){if("%%"===t)return t;a++;var o=n.formatters[r];if("function"==typeof o){var i=s[a];t=o.call(e,i),s.splice(a,1),a--}return t}),n.formatArgs.call(e,s),(t.log||n.log||console.log.bind(console)).apply(e,s)}}return t.namespace=e,t.enabled=n.enabled(e),t.useColors=n.useColors(),t.color=r(e),"function"==typeof n.init&&n.init(t),t}(n=t.exports=o.debug=o.default=o).coerce=function(e){return e instanceof Error?e.stack||e.message:e},n.disable=function(){n.enable("")},n.enable=function(e){n.save(e),n.names=[],n.skips=[];for(var t=("string"==typeof e?e:"").split(/[\s,]+/),r=t.length,o=0;o<r;o++)t[o]&&("-"===(e=t[o].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))},n.enabled=function(e){var t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=e("ms"),n.names=[],n.skips=[],n.formatters={};var i},{ms:29}],32:[function(e,t,n){var r=e("to-space-case");t.exports=function(e){return r(e).replace(/\s(\w)/g,function(e,t){return t.toUpperCase()})}},{"to-space-case":33}],33:[function(e,t,n){var r=e("to-no-case");t.exports=function(e){return r(e).replace(/[\W_]+(.|$)/g,function(e,t){return t?" "+t:""})}},{"to-no-case":34}],34:[function(e,t,n){function r(e){return e.replace(a,function(e,t){return t?" "+t:""})}function o(e){return e.replace(l,function(e,t,n){return t+" "+n.toLowerCase().split("").join(" ")})}t.exports=function(e){return i.test(e)?e.toLowerCase():(c.test(e)&&(e=r(e)),s.test(e)&&(e=o(e)),e.toLowerCase())};var i=/\s/,s=/[a-z][A-Z]/,c=/[\W_]/,a=/[\W_]+(.|$)/g,l=/(.)([A-Z]+)/g},{}],35:[function(e,t,n){t.exports=function(e){for(var t=e;t=t.parentNode;)if(t==document)return!0;return!1}},{}],36:[function(e,t,n){var r=e("closest"),o=e("event");n.bind=function(e,t,n,i,s){return o.bind(e,n,function(n){var o=n.target||n.srcElement;n.delegateTarget=r(o,t,!0,e),n.delegateTarget&&i.call(e,n)},s)},n.unbind=function(e,t,n,r){o.unbind(e,t,n,r)}},{closest:8,event:39}],37:[function(e,t,n){function r(e,t,n){for(var r=0;r<e.length;++r)t.call(n,e.charAt(r),r)}function o(e,t,n){for(var r in e)a.call(e,r)&&t.call(n,r,e[r])}function i(e,t,n){for(var r=0;r<e.length;++r)t.call(n,e[r],r)}try{s=e("type")}catch(t){var s=e("component-type")}var c=e("to-function"),a=Object.prototype.hasOwnProperty;t.exports=function(e,t,n){switch(t=c(t),n=n||this,s(e)){case"array":return i(e,t,n);case"object":return"number"==typeof e.length?i(e,t,n):o(e,t,n);case"string":return r(e,t,n)}}},{"component-type":38,"to-function":48,type:38}],38:[function(e,t,n){var r=Object.prototype.toString;t.exports=function(e){switch(r.call(e)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object String]":return"string"}return null===e?"null":void 0===e?"undefined":e&&1===e.nodeType?"element":e===Object(e)?"object":typeof e}},{}],39:[function(e,t,n){var r=window.addEventListener?"addEventListener":"attachEvent",o=window.removeEventListener?"removeEventListener":"detachEvent",i="addEventListener"!==r?"on":"";n.bind=function(e,t,n,o){return e[r](i+t,n,o||!1),n},n.unbind=function(e,t,n,r){return e[o](i+t,n,r||!1),n}},{}],40:[function(e,t,n){arguments[4][10][0].apply(n,arguments)},{dup:10}],41:[function(e,t,n){function r(e){switch(i(e)){case"checkbox":case"radio":if(e.checked){var t=e.getAttribute("value");return null==t||t}return!1;case"radiogroup":for(var n,r=0;n=e[r];r++)if(n.checked)return n.value;break;case"select":for(var o,r=0;o=e.options[r];r++)if(o.selected)return o.value;break;default:return e.value}}function o(e,t){switch(i(e)){case"checkbox":case"radio":e.checked=!!t;break;case"radiogroup":for(var n,r=0;n=e[r];r++)n.checked=n.value===t;break;case"select":for(var o,r=0;o=e.options[r];r++)o.selected=o.value===t;break;default:e.value=t}}function i(e){var t="array"==s(e)||"object"==s(e);t&&(e=e[0]);var n=e.nodeName.toLowerCase(),r=e.getAttribute("type");return t&&r&&"radio"==r.toLowerCase()?"radiogroup":"input"==n&&r&&"checkbox"==r.toLowerCase()?"checkbox":"input"==n&&r&&"radio"==r.toLowerCase()?"radio":"select"==n?"select":n}var s=e("type");t.exports=function(e,t){return 2==arguments.length?o(e,t):r(e)}},{type:42}],42:[function(e,t,n){function r(e){return!(null==e||!(e._isBuffer||e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)))}var o=Object.prototype.toString;t.exports=function(e){switch(o.call(e)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return null===e?"null":void 0===e?"undefined":e!==e?"nan":e&&1===e.nodeType?"element":r(e)?"buffer":typeof(e=e.valueOf?e.valueOf():Object.prototype.valueOf.apply(e))}},{}],43:[function(e,t,n){t.exports=function(e,t){if("string"!=typeof e)throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var r=n[1];if("body"==r)return(l=t.createElement("html")).innerHTML=e,l.removeChild(l.lastChild);var o=i[r]||i._default,s=o[0],c=o[1],a=o[2],l=t.createElement("div");for(l.innerHTML=c+e+a;s--;)l=l.lastChild;if(l.firstChild==l.lastChild)return l.removeChild(l.firstChild);for(var u=t.createDocumentFragment();l.firstChild;)u.appendChild(l.removeChild(l.firstChild));return u};var r=document.createElement("div");r.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>';var o=!r.getElementsByTagName("link").length;r=void 0;var i={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:o?[1,"X<div>","</div>"]:[0,"",""]};i.td=i.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],i.option=i.optgroup=[1,'<select multiple="multiple">',"</select>"],i.thead=i.tbody=i.colgroup=i.caption=i.tfoot=[1,"<table>","</table>"],i.polyline=i.ellipse=i.polygon=i.circle=i.text=i.line=i.path=i.rect=i.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"]},{}],44:[function(e,t,n){"use strict";var r=Element.prototype,o=r.matches||r.matchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector;t.exports=function(e,t){if(o)return o.call(e,t);for(var n=e.parentNode.querySelectorAll(t),r=0;r<n.length;r++)if(n[r]==e)return!0;return!1}},{}],45:[function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,o=Object.prototype.toString,i=e("./isArguments"),s=!{toString:null}.propertyIsEnumerable("toString"),c=function(){}.propertyIsEnumerable("prototype"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],l=function(e){var t=null!==e&&"object"==typeof e,n="[object Function]"===o.call(e),l=i(e),u=t&&"[object String]"===o.call(e),f=[];if(!t&&!n&&!l)throw new TypeError("Object.keys called on a non-object");var p=c&&n;if(u&&e.length>0&&!r.call(e,0))for(var h=0;h<e.length;++h)f.push(String(h));if(l&&e.length>0)for(var d=0;d<e.length;++d)f.push(String(d));else for(var m in e)p&&"prototype"===m||!r.call(e,m)||f.push(String(m));if(s)for(var v=e.constructor,g=v&&v.prototype===e,y=0;y<a.length;++y)g&&"constructor"===a[y]||!r.call(e,a[y])||f.push(a[y]);return f};l.shim=function(){return Object.keys||(Object.keys=l),Object.keys||l},t.exports=l},{"./isArguments":46}],46:[function(e,t,n){"use strict";var r=Object.prototype.toString;t.exports=function(e){var t=r.call(e),n="[object Arguments]"===t;return n||(n="[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===r.call(e.callee)),n}},{}],47:[function(e,t,n){t.exports=function(e,t){var n=void 0!==e.textContent?"textContent":"innerText";return void 0!==t&&(e[n]=t),e[n]}},{}],48:[function(e,t,n){function r(e){switch({}.toString.call(e)){case"[object Object]":return c(e);case"[object Function]":return e;case"[object String]":return s(e);case"[object RegExp]":return i(e);default:return o(e)}}function o(e){return function(t){return e===t}}function i(e){return function(t){return e.test(t)}}function s(e){return/^ *\W+/.test(e)?new Function("_","return _ "+e):new Function("_","return "+a(e))}function c(e){var t={};for(var n in e)t[n]="string"==typeof e[n]?o(e[n]):r(e[n]);return function(e){if("object"!=typeof e)return!1;for(var n in t){if(!(n in e))return!1;if(!t[n](e[n]))return!1}return!0}}function a(e){var t=u(e);if(!t.length)return"_."+e;var n,r,o;for(r=0;r<t.length;r++)e=l(o=t[r],e,n="('function' == typeof "+(n="_."+o)+" ? "+n+"() : "+n+")");return e}function l(e,t,n){return t.replace(new RegExp("(\\.)?"+e,"g"),function(e,t){return t?e:n})}var u;try{u=e("props")}catch(t){u=e("component-props")}t.exports=r},{"component-props":49,props:49}],49:[function(e,t,n){function r(e){return e.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\//g,"").replace(c,"").match(/[a-zA-Z_]\w*/g)||[]}function o(e,t,n){var r=/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\/|[a-zA-Z_]\w*/g;return e.replace(r,function(e){return"("==e[e.length-1]?n(e):~t.indexOf(e)?n(e):e})}function i(e){for(var t=[],n=0;n<e.length;n++)~t.indexOf(e[n])||t.push(e[n]);return t}function s(e){return function(t){return e+t}}var c=/\b(Array|Date|Object|Math|JSON)\b/g;t.exports=function(e,t){var n=i(r(e));return t&&"string"==typeof t&&(t=s(t)),t?o(e,n,t):n}},{}],50:[function(e,t,n){(n=t.exports=function(e){return e.replace(/^\s*|\s*$/g,"")}).left=function(e){return e.replace(/^\s*/,"")},n.right=function(e){return e.replace(/\s*$/,"")}},{}],51:[function(e,t,n){var r=e("matches-selector");t.exports=function(e,t,n,o){var t=t[e],i=o||1,s=[];if(!t)return s;do{if(i==s.length)break;1==t.nodeType&&(r(t,n)&&s.push(t),n||s.push(t))}while(t=t[e]);return s}},{"matches-selector":44}],52:[function(e,t,n){function r(e){if(e)return o(e)}function o(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){r.off(e,n),t.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var r,o=0;o<n.length;o++)if((r=n[o])===t||r.fn===t){n.splice(o,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n)for(var r=0,o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,t);return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],53:[function(e,t,n){t.exports='<div class="confirmation-actions">\n  <button class="cancel">Cancel</button>\n  <button class="ok main">Ok</button>\n</div>'},{}],54:[function(e,t,n){function r(e){o.call(this,e),this.focus("cancel")}var o=e("dialog").Dialog,i=e("event"),s=e("query"),c=e("./confirmation.html"),a=e("inherit");(t.exports=function(e,t){switch(arguments.length){case 2:return new r({title:e,message:t});case 1:return new r({message:e})}}).Confirmation=r,a(r,o),r.prototype.focus=function(e){return this._focus=e,this},r.prototype.cancel=function(e){return s(".cancel",this.el).innerHTML=e,this},r.prototype.ok=function(e){return s(".ok",this.el).innerHTML=e,this},r.prototype.show=function(e){return o.prototype.show.call(this),s("."+this._focus,this.el).focus(),this.callback=e||function(){},this},r.prototype.render=function(e){var t=this;o.prototype.render.call(this,e),this._classes.add("confirmation"),this.el.insertAdjacentHTML("beforeend",c),this.on("close",function(){t.emit("cancel"),t.callback(!1)}),this.on("escape",function(){t.emit("cancel"),t.callback(!1)}),i.bind(s(".cancel",this.el),"click",function(e){e.preventDefault(),t.emit("cancel"),t.callback(!1),t.hide()}),i.bind(s(".ok",this.el),"click",function(e){e.preventDefault(),t.emit("ok"),t.callback(!0),t.hide()})}},{"./confirmation.html":53,dialog:58,event:55,inherit:56,query:57}],55:[function(e,t,n){function r(){o=window.addEventListener?"addEventListener":"attachEvent",i=window.removeEventListener?"removeEventListener":"detachEvent",s="addEventListener"!==o?"on":""}var o,i,s;n.bind=function(e,t,n,i){return o||r(),e[o](s+t,n,i||!1),n},n.unbind=function(e,t,n,o){return i||r(),e[i](s+t,n,o||!1),n}},{}],56:[function(e,t,n){t.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],57:[function(e,t,n){arguments[4][10][0].apply(n,arguments)},{dup:10}],58:[function(e,t,n){function r(t){i.call(this),t=t||{},this.template=e("./template.html"),this.el=c(this.template),this._classes=l(this.el),this.render(t),o&&!o.hiding&&o.hide(),n.effect&&this.effect(n.effect),o=this,this.on("escape",function(){o.hide()})}var o,i=e("emitter"),s=e("overlay"),c=e("domify"),a=e("event"),l=e("classes"),u=e("query");(n=t.exports=function(e,t){switch(arguments.length){case 2:return new r({title:e,message:t});case 1:return new r({message:e})}}).Dialog=r,(r.prototype=new i).render=function(e){var t=this,n=t.el,r=e.title,o=u(".title",n),i=u("p",n),s=e.message;a.bind(u(".close",n),"click",function(e){e.preventDefault(),t.emit("close"),t.hide()}),o&&(r?o.textContent=r:o.parentNode.removeChild(o)),"string"==typeof s?i.textContent=s:s&&(i.parentNode.insertBefore(s.el||s,i),i.parentNode.removeChild(i))},r.prototype.closable=function(){return this.addClass("closable")},r.prototype.addClass=function(e){return this._classes.add(e),this},r.prototype.effect=function(e){return this._effect=e,this.addClass(e),this},r.prototype.modal=function(){return this._overlay=s(),this},r.prototype.overlay=function(e){var t=this,n=s(e=e||{closable:!0});return n.on("hide",function(){t._overlay=null,t.hide()}),this._overlay=n,this},r.prototype.escapable=function(){var e=this;return e._escKeyCallback=e._escKeyCallback||function(t){t.which=t.which||t.keyCode,27===t.which&&e.emit("escape")},a.bind(document,"keydown",e._escKeyCallback),this},r.prototype.fixed=function(){return this._fixed=!0,this},r.prototype.show=function(){var e=this._overlay;return e&&(e.show(),this._classes.add("modal")),e&&!e.closable||this.escapable(),document.body.appendChild(this.el),this._classes.remove("hide"),this.emit("show"),this},r.prototype.hideOverlay=function(){this._overlay&&(this._overlay.remove(),this._overlay=null)},r.prototype.hide=function(e){var t=this;return t._escKeyCallback&&a.unbind(document,"keydown",t._escKeyCallback),t.hiding=!0,e?(setTimeout(function(){t.hide()},e),t):(t._classes.add("hide"),t._effect?setTimeout(function(){t.remove()},500):t.remove(),t.hideOverlay(),t)},r.prototype.remove=function(){return this.el.parentNode&&(this.emit("hide"),this.el.parentNode.removeChild(this.el)),this}},{"./template.html":64,classes:6,domify:60,emitter:52,event:59,overlay:61,query:57}],59:[function(e,t,n){arguments[4][39][0].apply(n,arguments)},{dup:39}],60:[function(e,t,n){t.exports=function(e,t){if("string"!=typeof e)throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var r=n[1];if("body"==r)return(l=t.createElement("html")).innerHTML=e,l.removeChild(l.lastChild);var o=i[r]||i._default,s=o[0],c=o[1],a=o[2],l=t.createElement("div");for(l.innerHTML=c+e+a;s--;)l=l.lastChild;if(l.firstChild==l.lastChild)return l.removeChild(l.firstChild);for(var u=t.createDocumentFragment();l.firstChild;)u.appendChild(l.removeChild(l.firstChild));return u};var r,o=!1;"undefined"!=typeof document&&((r=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',o=!r.getElementsByTagName("link").length,r=void 0);var i={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:o?[1,"X<div>","</div>"]:[0,"",""]};i.td=i.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],i.option=i.optgroup=[1,'<select multiple="multiple">',"</select>"],i.thead=i.tbody=i.colgroup=i.caption=i.tfoot=[1,"<table>","</table>"],i.polyline=i.ellipse=i.polygon=i.circle=i.text=i.line=i.path=i.rect=i.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"]},{}],61:[function(e,t,n){function r(e){o.call(this),e=e||{},this.target=e.target||document.body,this.closable=e.closable,this.el=s(i),this.closable&&(c.bind(this.el,"click",this.hide.bind(this)),a(this.el).add("closable"))}var o=e("emitter"),i=e("./template.html"),s=e("domify"),c=e("event"),a=e("classes");(t.exports=function(e){return(e=e||{}).nodeName&&(e={target:e}),new r(e)}).Overlay=r,o(r.prototype),r.prototype.show=function(){var e=this;return this.emit("show"),this.target.appendChild(this.el),setTimeout(function(){a(e.el).remove("hidden")}),this},r.prototype.hide=function(){return this.emit("hide"),this.remove()},r.prototype.remove=function(){var e=this;return this.emit("close"),a(this.el).add("hidden"),setTimeout(function(){e.target.removeChild(e.el)},350),this}},{"./template.html":63,classes:6,domify:60,emitter:62,event:59}],62:[function(e,t,n){arguments[4][52][0].apply(n,arguments)},{dup:52}],63:[function(e,t,n){t.exports='<div class="overlay hidden"></div>\r\n'},{}],64:[function(e,t,n){t.exports='<div class="dialog hide">\r\n  <div class="content">\r\n    <span class="title">Title</span>\r\n    <a href="#" class="close">&times;<em>close</em></a>\r\n    <div class="body">\r\n      <p>Message</p>\r\n    </div>\r\n  </div>\r\n</div>\r\n'},{}],65:[function(e,t,n){function r(e,t,n){return"string"==typeof t?(n=t,t={}):t=t||{},n=n||i,r[n]&&(e=r[n][e]||e),e.replace(/\{([^}]+)\}/g,function(e,n){var r=o(n,t);return void 0!==r?r:e})}function o(e,t){return new Function("_","return _."+e)(t)}var i="en";(t.exports=r).lang=function(e){if(0==arguments.length)return i;i=e}},{}],66:[function(e,t,n){var r=e("line-height");t.exports=function(e,t){t=t||{};var n=r(e),o=e.offsetHeight,i=n*(t.lines||1);if(o>i){for(var s,c=[e],a=[];c.length;){s=c.shift(),a.push(s);for(var l=s.childNodes.length;l--;)c.unshift(s.childNodes[l])}for(var u=a.length-1,f=!1;u>=1;u--){if(3===(s=a[u]).nodeType)for(var p=s.nodeValue.split(" "),h=p.length;h--;){var d=p.slice(0,h).join(" ")+"";if(s.nodeValue=d,e.offsetHeight<=i){f=!0;break}}if(f||(s.parentNode.removeChild(s),e.offsetHeight<=i&&(f=!0)),f)break}}return e}},{"line-height":67}],67:[function(e,t,n){var r=e("computed-style");t.exports=function(e){var t=r(e,"line-height"),n=parseFloat(t,10);if(t===n+""){var o=e.style.lineHeight;e.style.lineHeight=t+"em",t=r(e,"line-height"),n=parseFloat(t,10),o?e.style.lineHeight=o:delete e.style.lineHeight}if(-1!==t.indexOf("pt")?(n*=4,n/=3):-1!==t.indexOf("mm")?(n*=96,n/=25.4):-1!==t.indexOf("cm")?(n*=96,n/=2.54):-1!==t.indexOf("in")?n*=96:-1!==t.indexOf("pc")&&(n*=16),n=Math.round(n),"normal"===t){var i=e.nodeName,s=document.createElement(i);s.innerHTML="&nbsp;";var c=r(e,"font-size");s.style.fontSize=c;var a=document.body;a.appendChild(s),n=s.offsetHeight,a.removeChild(s)}return n}},{"computed-style":68}],68:[function(e,t,n){t.exports=function(e,t,n){return((n=window.getComputedStyle)?n(e):e.currentStyle)[t.replace(/-(\w)/gi,function(e,t){return t.toUpperCase()})]}},{}],69:[function(e,t,n){t.exports='<li data-comment-id="<%- comment.id %>">\n  <div class="comment-body">\n    <div class="author-avatar">\n      <img src="<%- comment.authorAvatarUrl %>">\n      <% if (voting && currentUser && comment.authorId !== currentUser.id){ %>\n        <div class="voting">\n          <span class="votes">0</span>\n          <a href="#" class="action-link upvote", title="Upvote"><i class="icon-angle-up"></i></a>\n          <a href="#" class="action-link downvote", title="Downvote"><i class="icon-angle-down"></i></a>\n        </div>\n      <% } %>\n    </div>\n    <div class="right-of-avatar">\n      <% if (comment.authorUrl) { %>\n        <a class="author-name" href="<%- comment.authorUrl %>">\n          <%- comment.authorName %>\n        </a>\n      <% } else { %>\n        <p class="author-name">\n          <%- comment.authorName %>\n          <% if (comment.createdAt) { %>\n            <small class="ago" data-time="<%- comment.createdAt %>"></small>\n          <% } %>\n        </p>\n      <% } %>\n      <div class="comment-view-wrapper">\n        <p class="comment">\n          <%- comment.comment %>\n        </p>\n        <div class="comment-actions">\n          <% if (currentUser && comment.authorId === currentUser.id){ %>\n            <a href="#" class="action-link edit">Edit</a>\n          <% } %>\n          <% if (currentUser && (currentUser.isAdmin || comment.authorId === currentUser.id)){ %>\n            <a href="#" class="action-link delete">Delete</a>\n          <% } %>\n        </div>\n      </div>\n      <div class="comment-form-wrapper hide">\n        <p class="error"></p>\n        <input type="hidden" class="comment-id" value="<%- comment.id %>">\n        <input type="text" class="comment-box" value="<%- comment.comment %>">\n        <div class="comment-actions">\n          <a href="#" class="action-link post">Save</a>\n          <a href="#" class="action-link cancel-edit">Cancel</a>\n        </div>\n      </div>\n    </div>\n  </div>\n</li>\n'},{}],70:[function(e,t,n){t.exports='<div class="side-comment <%= sectionClasses %>">\n  <a href="#" class="marker">\n    <span><%- comments.length %></span>\n  </a>\n\n  <div class="comments-wrapper">\n    <ul class="comments">\n      <% _.each(comments, function( comment ){ %>\n        <%= _.template(commentTemplate, { comment: comment, currentUser: currentUser, t: t, voting: voting }) %>\n      <% }) %>\n    </ul>\n\n    <% if (!currentUser) { %>\n      <span class="restricted">\n        <a href="/signin">Login</a>\n        Or\n        <a href="/signup?reference=<%= reference %>">Signup</a>\n      </span>\n    <% } %>\n\n    <% if (currentUser){ %>\n      <a href="#" class="add-comment">Leave a comment</a>\n      <div class="comment-form comment-form-wrapper">\n        <div class="author-avatar">\n          <img src="<%- currentUser.avatarUrl %>">\n        </div>\n        <div class="right-of-avatar">\n          <p class="author-name">\n            <%- currentUser.name %>\n          </p>\n          <p class="error"></p>\n          <input type="text" class="comment-box" placeholder="Leave a comment...">\n          <div class="actions">\n            <a href="#" class="action-link post">Post</a>\n            <a href="#" class="action-link cancel">Cancel</a>\n          </div>\n        </div>\n      </div>\n    <% } %>\n  </div>\n</div>\n'},{}]},{},[3])(3)});